=+=+= Ping test to all the target routers =+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
Router           Host           Ping
------------------------------------
openwrt1         192.168.1.101  OK
rpi1             192.168.1.104  OK
openwrt2         192.168.1.102  OK
openwrt3         192.168.1.103  OK
=+=+= NLAN Request to router:openwrt3,platform:openwrt +=+=+=+=+=+=+=+=+=+=+=+
command: init.run
=+=+= NLAN Request to router:openwrt2,platform:openwrt +=+=+=+=+=+=+=+=+=+=+=+
command: init.run
=+=+= NLAN Request to router:openwrt1,platform:openwrt +=+=+=+=+=+=+=+=+=+=+=+
command: init.run
=+=+= NLAN Request to router:rpi1,platform:debian =+=+=+=+=+=+=+=+=+=+=+=+=+=+
command: init.run
--- STDOUT from router:openwrt2,platform:openwrt
From nobody Wed May 28 05:18:03 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI"

--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: test/plain
Content-Description: Default STDOUT
X-NLAN-Type: default_stdout


--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:01, 337 module:nlan_agent,
 function:<module>, router:openwrt2
X-NLAN-Type: logger

NLAN Agent initialization completed
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 337 module:nlan_agent,
 function:<module>, router:openwrt2
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0xb74ddecc>, 'share_dir': '/opt/nlan/share', 'router': 'openwrt2', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'openwrt', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0xb74eeb8c>, 'schema': 'ovsdb_nlan.schema'}
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:01, 349 module:nlan_agent,
 function:_route, router:openwrt2
X-NLAN-Type: logger

function:init.run, args:(), kwargs:{}
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 349 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: lxc-ls
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 356 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-tun
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 370 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-int
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 415 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl show
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 419 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 down
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 423 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl delif br101 veth-ns101
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 429 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 up
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 431 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev br101 down
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 436 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl delbr br101
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 441 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 down
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 446 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl delif br103 veth-ns103
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 452 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 up
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 457 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev br103 down
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 460 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl delbr br103
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 464 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 down
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 469 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl delif br1 veth-ns1
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 472 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 up
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 473 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev br1 down
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 475 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl delbr br1
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Conte--- STDOUT from router:openwrt3,platform:openwrt
From nobody Wed May 28 05:18:03 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM"

--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: test/plain
Content-Description: Default STDOUT
X-NLAN-Type: default_stdout


--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:00, 385 module:nlan_agent,
 function:<module>, router:openwrt3
X-NLAN-Type: logger

NLAN Agent initialization completed
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 385 module:nlan_agent,
 function:<module>, router:openwrt3
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0xb759cbec>, 'share_dir': '/opt/nlan/share', 'router': 'openwrt3', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'openwrt', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0xb75b148c>, 'schema': 'ovsdb_nlan.schema'}
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:00, 399 module:nlan_agent,
 function:_route, router:openwrt3
X-NLAN-Type: logger

function:init.run, args:(), kwargs:{}
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 399 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: lxc-ls
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 405 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-tun
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 419 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-int
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 468 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl show
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 470 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 down
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 476 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl delif br101 veth-ns101
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 481 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 up
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 483 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev br101 down
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 485 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl delbr br101
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 492 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 down
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 495 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl delif br103 veth-ns103
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 500 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 up
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 502 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev br103 down
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 504 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl delbr br103
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 507 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 down
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 513 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl delif br1 veth-ns1
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 516 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 up
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 518 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev br1 down
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 520 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl delbr br1
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 526 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns list
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 528 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns del ns1
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 530 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns del ns101
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:00, 533 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns del ns103
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:00, 542 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[],"columns":["vni","ip_dvr"],"op":"select"}],"method":"transact","id":463481}, "response":{"id":463481,"result":[{"rows":[{"vni":103,"ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"]]]},{"vni":101,"ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","spoke_dvr"]]]},{"vni":1,"ip_dvr":["map",[["addr","192.168.100.3/24"],["mode","dvr"]]]}]}],"error":null}}
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:00, 545 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"delete"}],"method":"transact","id":718864}, "response":{"id":718864,"result":[{"count":1}],"error":null}}
--L8hBgQ1Qwnm9DaRwpD8uHBwFssCcMBuM--


--- RESPONSE from router:openwrt3,platform:openwrt
message: Execution completed
exit: 0
nt-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 480 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns list
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 481 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns del ns101
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 483 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns del ns103
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:01, 484 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns del ns1
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:01, 489 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[],"columns":["vni","ip_dvr"],"op":"select"}],"method":"transact","id":187753}, "response":{"id":187753,"result":[{"rows":[{"vni":1,"ip_dvr":["map",[["addr","192.168.100.2/24"],["mode","dvr"]]]},{"vni":103,"ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"]]]},{"vni":101,"ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","spoke_dvr"]]]}]}],"error":null}}
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:01, 491 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"delete"}],"method":"transact","id":92698}, "response":{"id":92698,"result":[{"count":1}],"error":null}}
--WGZuwRAblZiMA8Uu9hxfDhj6M4JBtAnI--


--- RESPONSE from router:openwrt2,platform:openwrt
message: Execution completed
exit: 0
--- STDOUT from router:rpi1,platform:debian
From nobody Wed May 28 05:18:03 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF"

--HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF
Content-Type: test/plain
Content-Description: Default STDOUT
X-NLAN-Type: default_stdout


--HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:02, 550 module:nlan_agent,
 function:<module>, router:rpi1
X-NLAN-Type: logger

NLAN Agent initialization completed
--HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:02, 550 module:nlan_agent,
 function:<module>, router:rpi1
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0x9e777cc>, 'share_dir': '/opt/nlan/share', 'router': 'rpi1', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'debian', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0x9e8340c>, 'schema': 'ovsdb_nlan.schema'}
--HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:02, 560 module:nlan_agent,
 function:_route, router:rpi1
X-NLAN-Type: logger

function:init.run, args:(), kwargs:{}
--HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:02, 560 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: lxc-ls
--HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:02, 713 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: lxc-stop -n snort1
--HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:02, 826 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: lxc-stop -n snort2
--HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:02, 827 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-tun
--HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:02, 833 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-int
--HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:02, 841 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: brctl show
--HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:02, 854 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ip netns list
--HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:02, 881 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "where": [], "op": "delete"}], "method": "transact", "id": 729236}, "response":{"id":729236,"result":[{"count":1}],"error":null}}
--HSlhUalzsIi3WhvcZJ1ycTbdtsJsBlPF--


--- RESPONSE from router:rpi1,platform:debian
message: Execution completed
exit: 0
--- STDOUT from router:openwrt1,platform:openwrt
From nobody Wed May 28 05:18:05 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw"

--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: test/plain
Content-Description: Default STDOUT
X-NLAN-Type: default_stdout


--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:02, 472 module:nlan_agent,
 function:<module>, router:openwrt1
X-NLAN-Type: logger

NLAN Agent initialization completed
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 473 module:nlan_agent,
 function:<module>, router:openwrt1
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0xb74ace6c>, 'share_dir': '/opt/nlan/share', 'router': 'openwrt1', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'openwrt', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0xb74bdb2c>, 'schema': 'ovsdb_nlan.schema'}
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:02, 484 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:init.run, args:(), kwargs:{}
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 484 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: lxc-ls
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 491 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-tun
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 504 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl --if-exists del-br br-int
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 554 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl show
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 562 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1001 down
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 569 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl delif br1001 veth-ns1001
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 574 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1001 up
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 578 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev br1001 down
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 583 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl delbr br1001
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 590 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 down
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 595 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl delif br103 veth-ns103
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 604 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 up
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 611 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev br103 down
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 616 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl delbr br103
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 621 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 down
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 625 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl delif br1 veth-ns1
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 629 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 up
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 631 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev br1 down
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 633 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl delbr br1
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 638 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns list
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 640 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns del ns-global
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 643 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns del ns103
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 645 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns del ns1
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 646 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns del ns1001
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:02, 650 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[],"columns":["vni","ip_dvr"],"op":"select"}],"method":"transact","id":353232}, "response":{"id":353232,"result":[{"rows":[{"vni":1001,"ip_dvr":["map",[["addr","10.0.1.1/24"],["dhcp","enabled"],["mode","hub"]]]},{"vni":1,"ip_dvr":["map",[["addr","192.168.100.1/24"],["mode","dvr"]]]},{"vni":103,"ip_dvr":["map",[["addr","10.0.3.1/24"],["dhcp","enabled"],["mode","dvr"]]]}]}],"error":null}}
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 652 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci delete network.int_dvr1001
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 655 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci delete dhcp.int_dvr1001
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 656 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci commit
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:02, 670 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/network restart
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:03, 705 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/dnsmasq restart
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:03, 771 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci delete network.int_dvr103
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:03, 776 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci delete dhcp.int_dvr103
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:03, 778 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci commit
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:03, 787 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/network restart
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 831 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/dnsmasq restart
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 908 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"delete"}],"method":"transact","id":574164}, "response":{"id":574164,"result":[{"count":1}],"error":null}}
--FQKxqCMo4FkqNLbmaXwcwIsyiBwNnRbw--


--- STDERR from router:openwrt1,platform:openwrt
Command failed: Not found
Command failed: Not found
--- RESPONSE from router:openwrt1,platform:openwrt
message: Execution completed
exit: 0
=+=+= Transaction Summary =+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+

Start Time: 2014-05-28 05:18:02.735026

Router           Result    Elapsed Time
---------------------------------------
openwrt2          :-)         0.52(sec)
openwrt3          :-)         0.55(sec)
rpi1              :-)         0.72(sec)
openwrt1          :-)         2.81(sec)
=+=+= Ping test to all the target routers =+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+
Router           Host           Ping
------------------------------------
rpi1             192.168.1.104  OK
openwrt1         192.168.1.101  OK
openwrt2         192.168.1.102  OK
openwrt3         192.168.1.103  OK
=+=+= NLAN Request to router:rpi1,platform:debian =+=+=+=+=+=+=+=+=+=+=+=+=+=+
operation: --add
dict_args: "OrderedDict([('bridges', {'ovs_bridges': 'enabled'}), ('services', [{'name': 'snort1', 'chain': ['mz.101', 'dmz.1001'], '_index': ['name', 'snort1']}]), ('vxlan', {'remote_ips': ['192.168.1.103', '192.168.1.102', '192.168.1.101'], 'local_ip': '192.168.1.104'}), ('subnets', [{'ports': ['dmz.1001'], 'peers': ['192.168.1.101'], 'vni': 1001, 'vid': 111, '_index': ['vni', 1001]}, {'ports': ['mz.101'], 'peers': ['192.168.1.102', '192.168.1.103'], 'vni': 101, 'vid': 1, '_index': ['vni', 101]}])])"
=+=+= NLAN Request to router:openwrt3,platform:openwrt +=+=+=+=+=+=+=+=+=+=+=+
operation: --add
dict_args: "OrderedDict([('bridges', {'ovs_bridges': 'enabled'}), ('vxlan', {'remote_ips': ['192.168.1.102', '192.168.1.101', '192.168.1.104'], 'local_ip': '192.168.1.103'}), ('subnets', [{'peers': ['192.168.1.101', '192.168.1.102'], 'vid': 2, '_index': ['vni', 1], 'ip_vhost': '192.168.100.103/24', 'default_gw': '192.168.100.1', 'ip_dvr': OrderedDict([('addr', '192.168.100.3/24'), ('mode', 'dvr')]), 'vni': 1}, {'peers': ['192.168.1.101', '192.168.1.102'], 'vid': 3, '_index': ['vni', 103], 'ip_vhost': '10.0.3.103/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr')])}, {'peers': ['192.168.1.102', '192.168.1.104'], 'vid': 1, '_index': ['vni', 101], 'ip_vhost': '10.0.1.103/24', 'vni': 101, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'spoke_dvr')])}])])"
=+=+= NLAN Request to router:openwrt2,platform:openwrt +=+=+=+=+=+=+=+=+=+=+=+
operation: --add
dict_args: "OrderedDict([('bridges', {'ovs_bridges': 'enabled'}), ('vxlan', {'remote_ips': ['192.168.1.103', '192.168.1.101', '192.168.1.104'], 'local_ip': '192.168.1.102'}), ('subnets', [{'peers': ['192.168.1.101', '192.168.1.103'], 'vid': 2, '_index': ['vni', 1], 'ip_vhost': '192.168.100.102/24', 'default_gw': '192.168.100.1', 'ip_dvr': OrderedDict([('addr', '192.168.100.2/24'), ('mode', 'dvr')]), 'vni': 1}, {'peers': ['192.168.1.101', '192.168.1.103'], 'vid': 3, '_index': ['vni', 103], 'ip_vhost': '10.0.3.102/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr')])}, {'peers': ['192.168.1.103', '192.168.1.104'], 'vid': 1, '_index': ['vni', 101], 'ip_vhost': '10.0.1.102/24', 'vni': 101, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'spoke_dvr')])}])])"
=+=+= NLAN Request to router:openwrt1,platform:openwrt +=+=+=+=+=+=+=+=+=+=+=+
operation: --add
dict_args: "OrderedDict([('bridges', {'ovs_bridges': 'enabled'}), ('gateway', {'network': 'eth2', 'rip': 'enabled'}), ('vxlan', {'remote_ips': ['192.168.1.103', '192.168.1.102', '192.168.1.104'], 'local_ip': '192.168.1.101'}), ('subnets', [{'peers': ['192.168.1.102', '192.168.1.103'], 'vid': 2, '_index': ['vni', 1], 'ip_vhost': '192.168.100.101/24', 'vni': 1, 'ip_dvr': OrderedDict([('addr', '192.168.100.1/24'), ('mode', 'dvr')])}, {'peers': ['192.168.1.102', '192.168.1.103'], 'vid': 3, '_index': ['vni', 103], 'ip_vhost': '10.0.3.101/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr'), ('dhcp', 'enabled')])}, {'peers': ['192.168.1.104'], 'vid': 1, '_index': ['vni', 1001], 'ip_vhost': '10.0.1.101/24', 'vni': 1001, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'hub'), ('dhcp', 'enabled')])}])])"
--- STDOUT from router:openwrt3,platform:openwrt
From nobody Wed May 28 05:18:07 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp"

--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: test/plain
Content-Description: Default STDOUT
X-NLAN-Type: default_stdout


--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:04, 008 module:nlan_agent,
 function:<module>, router:openwrt3
X-NLAN-Type: logger

NLAN Agent initialization completed
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 009 module:nlan_agent,
 function:<module>, router:openwrt3
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0xb75b81ac>, 'share_dir': '/opt/nlan/share', 'router': 'openwrt3', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'openwrt', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0xb75b8e0c>, 'schema': 'ovsdb_nlan.schema'}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:04, 058 module:nlan_agent,
 function:_route, router:openwrt3
X-NLAN-Type: logger

function:bridges.add, model:{'ovs_bridges': 'enabled'}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 064 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":740709}, "response":{"id":740709,"result":[{"rows":[]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 065 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","row":{},"op":"insert"}],"method":"transact","id":794906}, "response":{"id":794906,"result":[{"uuid":["uuid","2d6d00f7-b536-4eb4-a690-22878891a5cc"]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 066 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","where":[],"op":"select"}],"method":"transact","id":208909}, "response":{"id":208909,"result":[{"rows":[]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:04, 066 module:bridges,
 function:add, router:openwrt3
X-NLAN-Type: logger

Adding bridges: br-int and br-tun
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 066 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-int
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 078 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-tun
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 096 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl del-flows br-tun
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 101 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int patch-int -- set interface patch-int type=patch options:peer=patch-tun
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 112 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun patch-tun -- set interface patch-tun type=patch options:peer=patch-int
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 122 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","patch-tun"]],"op":"select"}],"method":"transact","id":610398}, "response":{"id":610398,"result":[{"rows":[{"options":["map",[["peer","patch-int"]]],"mtu":["set",[]],"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"26:c8:1a:06:ea:b2","ingress_policing_rate":0,"ofport":1,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":["set",[]],"external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":["set",[]],"name":"patch-tun","type":"patch","cfm_remote_opstate":["set",[]],"_uuid":["uuid","829efd06-c581-4b79-84d9-ae7efe00a4e4"],"status":["map",[]],"ifindex":0,"_version":["uuid","a1c5f91c-1a37-4a23-ac5c-3cbecd5b2be1"],"other_config":["map",[]],"admin_state":["set",[]],"cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 127 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=1,actions=resubmit(,1)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 131 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=0,actions=drop
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 136 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=01:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,19)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 140 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=00:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,20)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 143 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=0,actions=drop
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 147 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=3,priority=0,actions=drop
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 151 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=10,priority=1,actions=learn(table=20,hard_timeout=300,priority=1,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:0->NXM_OF_VLAN_TCI[],load:NXM_NX_TUN_ID[]->NXM_NX_TUN_ID[],output:NXM_OF_IN_PORT[]),output:1
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 157 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=0,actions=resubmit(,21)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 161 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=20,priority=0,actions=resubmit(,21)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 164 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=0,actions=drop
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 168 module:ovsdb,
 function:crud, router:openwrt3
X-NLAN-Type: logger

CRUD operation (add): {'ovs_bridges': 'enabled'}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 169 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","uuid-name":"temp_144057","row":{"ovs_bridges":"enabled"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["bridges","insert",["set",[["named-uuid","temp_144057"]]]]],"op":"mutate"}],"method":"transact","id":802164}, "response":{"id":802164,"result":[{"uuid":["uuid","f1548b8e-0de7-4cbf-823f-d8f0b5b24219"]},{"count":1}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 171 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","where":[],"op":"select"}],"method":"transact","id":145738}, "response":{"id":145738,"result":[{"rows":[{"_uuid":["uuid","f1548b8e-0de7-4cbf-823f-d8f0b5b24219"],"_version":["uuid","289606a3-ea03-4d27-91c4-b5f912d2c1df"],"ovs_bridges":"enabled","controller":["set",[]]}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:04, 174 module:nlan_agent,
 function:_route, router:openwrt3
X-NLAN-Type: logger

function:vxlan.add, model:{'remote_ips': ['192.168.1.102', '192.168.1.101', '192.168.1.104'], 'local_ip': '192.168.1.103'}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 175 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":782780}, "response":{"id":782780,"result":[{"rows":[{"_uuid":["uuid","2d6d00f7-b536-4eb4-a690-22878891a5cc"],"_version":["uuid","8b80a9b2-21a2-448c-bdfa-97706347fa1a"],"gateway":["set",[]],"bridges":["uuid","f1548b8e-0de7-4cbf-823f-d8f0b5b24219"],"subnets":["set",[]],"vxlan":["set",[]],"services":["set",[]]}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 179 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","where":[],"op":"select"}],"method":"transact","id":603586}, "response":{"id":603586,"result":[{"rows":[]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:04, 180 module:vxlan, function:add,
 router:openwrt3
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001102
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 180 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001102 -- set interface 192168001102 type=vxlan options:in_key=flow options:local_ip=192.168.1.103 options:out_key=flow options:remote_ip=192.168.1.102
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:04, 189 module:vxlan, function:add,
 router:openwrt3
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001101
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 189 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001101 -- set interface 192168001101 type=vxlan options:in_key=flow options:local_ip=192.168.1.103 options:out_key=flow options:remote_ip=192.168.1.101
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:04, 198 module:vxlan, function:add,
 router:openwrt3
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001104
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 199 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001104 -- set interface 192168001104 type=vxlan options:in_key=flow options:local_ip=192.168.1.103 options:out_key=flow options:remote_ip=192.168.1.104
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 209 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":833401}, "response":{"id":833401,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 212 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=3,actions=resubmit(,2)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 217 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=2,actions=resubmit(,2)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 221 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=4,actions=resubmit(,2)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 225 module:ovsdb,
 function:crud, router:openwrt3
X-NLAN-Type: logger

CRUD operation (add): {'remote_ips': ['192.168.1.102', '192.168.1.101', '192.168.1.104'], 'local_ip': '192.168.1.103'}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 226 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","uuid-name":"temp_267908","row":{"remote_ips":["set",["192.168.1.102","192.168.1.101","192.168.1.104"]],"local_ip":"192.168.1.103"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["vxlan","insert",["set",[["named-uuid","temp_267908"]]]]],"op":"mutate"}],"method":"transact","id":914879}, "response":{"id":914879,"result":[{"uuid":["uuid","9cc4366a-ea85-4e6c-b40c-b92a1cc39188"]},{"count":1}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 227 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","where":[],"op":"select"}],"method":"transact","id":327981}, "response":{"id":327981,"result":[{"rows":[{"_version":["uuid","a5e3a021-cc56-413b-95cb-ae0d5384bb40"],"_uuid":["uuid","9cc4366a-ea85-4e6c-b40c-b92a1cc39188"],"local_ip":"192.168.1.103","remote_ips":["set",["192.168.1.101","192.168.1.102","192.168.1.104"]]}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:04, 235 module:nlan_agent,
 function:_route, router:openwrt3
X-NLAN-Type: logger

function:subnets.add, index:['vni', 1], model:{'peers': ['192.168.1.101', '192.168.1.102'], 'vid': 2, 'ip_vhost': '192.168.100.103/24', 'default_gw': '192.168.100.1', 'ip_dvr': OrderedDict([('addr', '192.168.100.3/24'), ('mode', 'dvr')]), 'vni': 1}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 235 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":57533}, "response":{"id":57533,"result":[{"rows":[{"_uuid":["uuid","2d6d00f7-b536-4eb4-a690-22878891a5cc"],"_version":["uuid","393ea96b-d677-4c1d-862a-c2c35162fad7"],"gateway":["set",[]],"bridges":["uuid","f1548b8e-0de7-4cbf-823f-d8f0b5b24219"],"subnets":["set",[]],"vxlan":["uuid","9cc4366a-ea85-4e6c-b40c-b92a1cc39188"],"services":["set",[]]}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 238 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1]],"op":"select"}],"method":"transact","id":96271}, "response":{"id":96271,"result":[{"rows":[]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:04, 238 module:subnets,
 function:add, router:openwrt3
X-NLAN-Type: logger

Adding a subnet(vlan): 2
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 239 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addbr br1
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 244 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br1 tag=2 -- set interface int_br1 type=internal
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 259 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr1 tag=2 -- set interface int_dvr1 type=internal
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 276 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addif br1 int_br1
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 281 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_br1 promisc on
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 284 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_br1 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 287 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_dvr1 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 290 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev br1 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 295 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns add ns1
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 298 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link add veth-ns1 type veth peer name temp-ns1
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 304 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev temp-ns1 netns ns1
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 309 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip link set dev temp-ns1 name eth0
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 315 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addif br1 veth-ns1
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 319 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 promisc on
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 321 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 327 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip link set dev eth0 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 334 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip addr add dev eth0 192.168.100.103/24
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 337 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip route add default via 192.168.100.3 dev eth0
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 341 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr1 192.168.100.3/24
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 343 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: route
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 345 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip route add default via 192.168.100.1
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 346 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":471188}, "response":{"id":471188,"result":[{"rows":[]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 347 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=1,actions=mod_vlan_vid:2,resubmit(,10)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 350 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=1,dl_type=0x0806,dl_vlan=2,nw_dst=192.168.100.3,actions=drop
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 353 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":520838}, "response":{"id":520838,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 355 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=2,actions=strip_vlan,set_tunnel:1,output:3,output:2
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 359 module:ovsdb,
 function:crud, router:openwrt3
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.101', '192.168.1.102'], 'vid': 2, 'ip_vhost': '192.168.100.103/24', 'default_gw': '192.168.100.1', 'ip_dvr': OrderedDict([('addr', '192.168.100.3/24'), ('mode', 'dvr')]), 'vni': 1}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 360 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_97202","row":{"peers":["set",["192.168.1.101","192.168.1.102"]],"vid":2,"ip_vhost":"192.168.100.103/24","default_gw":"192.168.100.1","ip_dvr":["map",[["addr","192.168.100.3/24"],["mode","dvr"]]],"vni":1},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_97202"]]]]],"op":"mutate"}],"method":"transact","id":818608}, "response":{"id":818608,"result":[{"uuid":["uuid","5e0462c1-5af3-4014-b002-f3da0e4b50a0"]},{"count":1}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 360 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1]],"op":"select"}],"method":"transact","id":238913}, "response":{"id":238913,"result":[{"rows":[{"peers":["set",["192.168.1.101","192.168.1.102"]],"_version":["uuid","ed5ec082-1556-41d9-ac1e-ec3c4fb06c79"],"ports":["set",[]],"vni":1,"vid":2,"_uuid":["uuid","5e0462c1-5af3-4014-b002-f3da0e4b50a0"],"default_gw":"192.168.100.1","ip_vhost":"192.168.100.103/24","ip_dvr":["map",[["addr","192.168.100.3/24"],["mode","dvr"]]]}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:04, 362 module:nlan_agent,
 function:_route, router:openwrt3
X-NLAN-Type: logger

function:subnets.add, index:['vni', 103], model:{'peers': ['192.168.1.101', '192.168.1.102'], 'vid': 3, 'ip_vhost': '10.0.3.103/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr')])}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 362 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":777169}, "response":{"id":777169,"result":[{"rows":[{"_uuid":["uuid","2d6d00f7-b536-4eb4-a690-22878891a5cc"],"_version":["uuid","c7d1114f-d66e-4500-b900-6866eafa5bfa"],"gateway":["set",[]],"bridges":["uuid","f1548b8e-0de7-4cbf-823f-d8f0b5b24219"],"subnets":["uuid","5e0462c1-5af3-4014-b002-f3da0e4b50a0"],"vxlan":["uuid","9cc4366a-ea85-4e6c-b40c-b92a1cc39188"],"services":["set",[]]}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 364 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",103]],"op":"select"}],"method":"transact","id":380535}, "response":{"id":380535,"result":[{"rows":[]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:04, 364 module:subnets,
 function:add, router:openwrt3
X-NLAN-Type: logger

Adding a subnet(vlan): 3
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 365 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addbr br103
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 369 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br103 tag=3 -- set interface int_br103 type=internal
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 383 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr103 tag=3 -- set interface int_dvr103 type=internal
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 398 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addif br103 int_br103
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 402 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_br103 promisc on
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 406 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_br103 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 409 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_dvr103 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 411 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev br103 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 415 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns add ns103
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 420 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link add veth-ns103 type veth peer name temp-ns103
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 427 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev temp-ns103 netns ns103
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 431 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip link set dev temp-ns103 name eth0
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 436 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addif br103 veth-ns103
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 445 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 promisc on
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 448 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 456 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip link set dev eth0 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 461 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip addr add dev eth0 10.0.3.103/24
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 464 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip route add default via 10.0.3.1 dev eth0
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 466 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr103 10.0.3.1/24
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 469 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":287580}, "response":{"id":287580,"result":[{"rows":[]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 469 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=103,actions=mod_vlan_vid:3,resubmit(,10)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 474 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=1,dl_type=0x0806,dl_vlan=3,nw_dst=10.0.3.1,actions=drop
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 479 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":673044}, "response":{"id":673044,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 481 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=3,actions=strip_vlan,set_tunnel:103,output:3,output:2
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 483 module:ovsdb,
 function:crud, router:openwrt3
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.101', '192.168.1.102'], 'vid': 3, 'ip_vhost': '10.0.3.103/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr')])}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 484 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_350243","row":{"vni":103,"ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"]]],"peers":["set",["192.168.1.101","192.168.1.102"]],"ip_vhost":"10.0.3.103/24","vid":3},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_350243"]]]]],"op":"mutate"}],"method":"transact","id":421879}, "response":{"id":421879,"result":[{"uuid":["uuid","a65ad18a-c580-426f-b91a-8ab244f892c2"]},{"count":1}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 486 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",103]],"op":"select"}],"method":"transact","id":65765}, "response":{"id":65765,"result":[{"rows":[{"peers":["set",["192.168.1.101","192.168.1.102"]],"_version":["uuid","22990889-f860-4198-9dc7-3702bfac7168"],"ports":["set",[]],"vni":103,"vid":3,"_uuid":["uuid","a65ad18a-c580-426f-b91a-8ab244f892c2"],"default_gw":["set",[]],"ip_vhost":"10.0.3.103/24","ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"]]]}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:04, 488 module:nlan_agent,
 function:_route, router:openwrt3
X-NLAN-Type: logger

function:subnets.add, index:['vni', 101], model:{'peers': ['192.168.1.102', '192.168.1.104'], 'vid': 1, 'ip_vhost': '10.0.1.103/24', 'vni': 101, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'spoke_dvr')])}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 488 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":355834}, "response":{"id":355834,"result":[{"rows":[{"_uuid":["uuid","2d6d00f7-b536-4eb4-a690-22878891a5cc"],"_version":["uuid","b1bb75fe-d850-41b0-b426-41c5e28e4e60"],"gateway":["set",[]],"bridges":["uuid","f1548b8e-0de7-4cbf-823f-d8f0b5b24219"],"subnets":["set",[["uuid","5e0462c1-5af3-4014-b002-f3da0e4b50a0"],["uuid","a65ad18a-c580-426f-b91a-8ab244f892c2"]]],"vxlan":["uuid","9cc4366a-ea85-4e6c-b40c-b92a1cc39188"],"services":["set",[]]}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 491 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",101]],"op":"select"}],"method":"transact","id":543810}, "response":{"id":543810,"result":[{"rows":[]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:04, 491 module:subnets,
 function:add, router:openwrt3
X-NLAN-Type: logger

Adding a subnet(vlan): 1
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 492 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addbr br101
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 497 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br101 tag=1 -- set interface int_br101 type=internal
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 515 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr101 tag=1 -- set interface int_dvr101 type=internal
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 534 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addif br101 int_br101
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 538 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_br101 promisc on
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 540 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_br101 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 543 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev int_dvr101 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 545 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev br101 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 549 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns add ns101
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 553 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link add veth-ns101 type veth peer name temp-ns101
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 559 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev temp-ns101 netns ns101
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 563 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip link set dev temp-ns101 name eth0
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 569 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: brctl addif br101 veth-ns101
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 573 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 promisc on
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 578 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 586 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip link set dev eth0 up
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 591 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip addr add dev eth0 10.0.1.103/24
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 593 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip route add default via 10.0.1.1 dev eth0
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 595 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr101 10.0.1.1/24
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 598 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":753372}, "response":{"id":753372,"result":[{"rows":[]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 599 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=101,actions=mod_vlan_vid:1,resubmit(,10)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 605 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ip link show dev int_dvr101
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 608 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","int_dvr101"]],"op":"select"}],"method":"transact","id":805500}, "response":{"id":805500,"result":[{"rows":[{"options":["map",[]],"mtu":1500,"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"ea:f6:a4:5d:8f:a2","ingress_policing_rate":0,"ofport":7,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":"up","external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":2,"name":"int_dvr101","type":"internal","cfm_remote_opstate":["set",[]],"_uuid":["uuid","2e8437d8-abbd-4d4d-9212-14faa10adf58"],"status":["map",[["driver_name","openvswitch"]]],"ifindex":44,"_version":["uuid","1eaffebc-f5d1-46ac-8be7-72051ec13c5f"],"other_config":["map",[]],"admin_state":"up","cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 614 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","int_br101"]],"op":"select"}],"method":"transact","id":519401}, "response":{"id":519401,"result":[{"rows":[{"options":["map",[]],"mtu":1500,"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"b6:4f:48:02:fa:ef","ingress_policing_rate":0,"ofport":6,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":"up","external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":2,"name":"int_br101","type":"internal","cfm_remote_opstate":["set",[]],"_uuid":["uuid","3b590479-69cc-4a98-9e09-b2a970178aca"],"status":["map",[["driver_name","openvswitch"]]],"ifindex":43,"_version":["uuid","7c3b7fd9-12e1-4fa2-b007-fb520282a032"],"other_config":["map",[]],"admin_state":"up","cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 620 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=2,in_port=6,dl_type=0x0800,nw_dst=10.0.1.0/24,actions=normal
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 625 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=6,dl_type=0x0800,nw_dst=10.0.0.0/8,actions=resubmit(,1)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 628 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=6,dl_type=0x0800,nw_dst=172.16.0.0/12,actions=resubmit(,1)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 632 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=6,dl_type=0x0800,nw_dst=192.168.0.0/16,actions=resubmit(,1)
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 637 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=7,dl_type=0x0806,nw_src=10.0.1.1,nw_proto=2,actions=drop
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 641 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=1,priority=0,in_port=6,actions=set_field:ea:f6:a4:5d:8f:a2->dl_dst,output:7
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 646 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":954064}, "response":{"id":954064,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.103"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 649 module:cmdutil,
 function:_cmd2, router:openwrt3
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=1,actions=strip_vlan,set_tunnel:101,output:2,output:4
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:04, 653 module:ovsdb,
 function:crud, router:openwrt3
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.102', '192.168.1.104'], 'vid': 1, 'ip_vhost': '10.0.1.103/24', 'vni': 101, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'spoke_dvr')])}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 654 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_183171","row":{"vni":101,"ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","spoke_dvr"]]],"peers":["set",["192.168.1.102","192.168.1.104"]],"ip_vhost":"10.0.1.103/24","vid":1},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_183171"]]]]],"op":"mutate"}],"method":"transact","id":987906}, "response":{"id":987906,"result":[{"uuid":["uuid","74776557-c627-45a6-ad23-dde877fe858e"]},{"count":1}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:04, 655 module:ovsdb,
 function:_send, router:openwrt3
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",101]],"op":"select"}],"method":"transact","id":358879}, "response":{"id":358879,"result":[{"rows":[{"peers":["set",["192.168.1.102","192.168.1.104"]],"_version":["uuid","5e348a89-7ade-4c1b-8659-ed6d12374337"],"ports":["set",[]],"vni":101,"vid":1,"_uuid":["uuid","74776557-c627-45a6-ad23-dde877fe858e"],"default_gw":["set",[]],"ip_vhost":"10.0.1.103/24","ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","spoke_dvr"]]]}]}],"error":null}}
--mYPdrAkOO96ODlqBHNCXXr0OVTTqoiNp--


--- RESPONSE from router:openwrt3,platform:openwrt
message: Execution completed
exit: 0
--- STDOUT from router:openwrt2,platform:openwrt
From nobody Wed May 28 05:18:07 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="UhoLh22PfuqzOHuf4Cgneomzphx1sWwz"

--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: test/plain
Content-Description: Default STDOUT
X-NLAN-Type: default_stdout


--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:05, 025 module:nlan_agent,
 function:<module>, router:openwrt2
X-NLAN-Type: logger

NLAN Agent initialization completed
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 025 module:nlan_agent,
 function:<module>, router:openwrt2
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0xb7536e6c>, 'share_dir': '/opt/nlan/share', 'router': 'openwrt2', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'openwrt', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0xb753a52c>, 'schema': 'ovsdb_nlan.schema'}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:05, 072 module:nlan_agent,
 function:_route, router:openwrt2
X-NLAN-Type: logger

function:bridges.add, model:{'ovs_bridges': 'enabled'}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 076 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":879507}, "response":{"id":879507,"result":[{"rows":[]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 077 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","row":{},"op":"insert"}],"method":"transact","id":744831}, "response":{"id":744831,"result":[{"uuid":["uuid","1255c828-9e22-4f65-92ec-c97640bc875f"]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 078 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","where":[],"op":"select"}],"method":"transact","id":460831}, "response":{"id":460831,"result":[{"rows":[]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:05, 079 module:bridges,
 function:add, router:openwrt2
X-NLAN-Type: logger

Adding bridges: br-int and br-tun
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 079 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-int
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 091 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-tun
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 110 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl del-flows br-tun
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 116 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int patch-int -- set interface patch-int type=patch options:peer=patch-tun
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 128 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun patch-tun -- set interface patch-tun type=patch options:peer=patch-int
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 137 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","patch-tun"]],"op":"select"}],"method":"transact","id":190947}, "response":{"id":190947,"result":[{"rows":[{"options":["map",[["peer","patch-int"]]],"mtu":["set",[]],"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"2a:e7:df:99:57:23","ingress_policing_rate":0,"ofport":1,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":["set",[]],"external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":["set",[]],"name":"patch-tun","type":"patch","cfm_remote_opstate":["set",[]],"_uuid":["uuid","b7ce8fc8-da7f-45dd-b1f2-797987140d54"],"status":["map",[]],"ifindex":0,"_version":["uuid","68d75932-2c5e-4f64-9a03-a2e2693eca7e"],"other_config":["map",[]],"admin_state":["set",[]],"cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 144 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=1,actions=resubmit(,1)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 147 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=0,actions=drop
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 151 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=01:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,19)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 155 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=00:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,20)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 159 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=0,actions=drop
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 163 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=3,priority=0,actions=drop
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 166 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=10,priority=1,actions=learn(table=20,hard_timeout=300,priority=1,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:0->NXM_OF_VLAN_TCI[],load:NXM_NX_TUN_ID[]->NXM_NX_TUN_ID[],output:NXM_OF_IN_PORT[]),output:1
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 170 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=0,actions=resubmit(,21)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 175 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=20,priority=0,actions=resubmit(,21)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 179 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=0,actions=drop
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 182 module:ovsdb,
 function:crud, router:openwrt2
X-NLAN-Type: logger

CRUD operation (add): {'ovs_bridges': 'enabled'}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 183 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","uuid-name":"temp_160383","row":{"ovs_bridges":"enabled"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["bridges","insert",["set",[["named-uuid","temp_160383"]]]]],"op":"mutate"}],"method":"transact","id":767781}, "response":{"id":767781,"result":[{"uuid":["uuid","00dde895-cdfd-4c41-8bf1-56e6395432fb"]},{"count":1}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 185 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","where":[],"op":"select"}],"method":"transact","id":363081}, "response":{"id":363081,"result":[{"rows":[{"_uuid":["uuid","00dde895-cdfd-4c41-8bf1-56e6395432fb"],"_version":["uuid","4ad84543-9125-4f43-81af-450a1e5d95e0"],"ovs_bridges":"enabled","controller":["set",[]]}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:05, 188 module:nlan_agent,
 function:_route, router:openwrt2
X-NLAN-Type: logger

function:vxlan.add, model:{'remote_ips': ['192.168.1.103', '192.168.1.101', '192.168.1.104'], 'local_ip': '192.168.1.102'}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 188 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":133191}, "response":{"id":133191,"result":[{"rows":[{"_uuid":["uuid","1255c828-9e22-4f65-92ec-c97640bc875f"],"_version":["uuid","15cffcad-03e0-44ae-ae57-6a84e9bb5be7"],"gateway":["set",[]],"bridges":["uuid","00dde895-cdfd-4c41-8bf1-56e6395432fb"],"subnets":["set",[]],"vxlan":["set",[]],"services":["set",[]]}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 193 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","where":[],"op":"select"}],"method":"transact","id":689117}, "response":{"id":689117,"result":[{"rows":[]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:05, 194 module:vxlan, function:add,
 router:openwrt2
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001103
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 194 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001103 -- set interface 192168001103 type=vxlan options:in_key=flow options:local_ip=192.168.1.102 options:out_key=flow options:remote_ip=192.168.1.103
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:05, 202 module:vxlan, function:add,
 router:openwrt2
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001101
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 202 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001101 -- set interface 192168001101 type=vxlan options:in_key=flow options:local_ip=192.168.1.102 options:out_key=flow options:remote_ip=192.168.1.101
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:05, 211 module:vxlan, function:add,
 router:openwrt2
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001104
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 212 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001104 -- set interface 192168001104 type=vxlan options:in_key=flow options:local_ip=192.168.1.102 options:out_key=flow options:remote_ip=192.168.1.104
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 220 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":890331}, "response":{"id":890331,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 222 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=3,actions=resubmit(,2)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 227 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=2,actions=resubmit(,2)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 231 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=4,actions=resubmit(,2)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 235 module:ovsdb,
 function:crud, router:openwrt2
X-NLAN-Type: logger

CRUD operation (add): {'remote_ips': ['192.168.1.103', '192.168.1.101', '192.168.1.104'], 'local_ip': '192.168.1.102'}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 236 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","uuid-name":"temp_966006","row":{"remote_ips":["set",["192.168.1.103","192.168.1.101","192.168.1.104"]],"local_ip":"192.168.1.102"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["vxlan","insert",["set",[["named-uuid","temp_966006"]]]]],"op":"mutate"}],"method":"transact","id":309224}, "response":{"id":309224,"result":[{"uuid":["uuid","bb5c6d3e-3a0d-4e96-a7c6-9a54496fb0da"]},{"count":1}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 237 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","where":[],"op":"select"}],"method":"transact","id":619999}, "response":{"id":619999,"result":[{"rows":[{"_version":["uuid","a3f31cdb-3ec1-40f9-ab15-20026a89b6c1"],"_uuid":["uuid","bb5c6d3e-3a0d-4e96-a7c6-9a54496fb0da"],"local_ip":"192.168.1.102","remote_ips":["set",["192.168.1.101","192.168.1.103","192.168.1.104"]]}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:05, 244 module:nlan_agent,
 function:_route, router:openwrt2
X-NLAN-Type: logger

function:subnets.add, index:['vni', 1], model:{'peers': ['192.168.1.101', '192.168.1.103'], 'vid': 2, 'ip_vhost': '192.168.100.102/24', 'default_gw': '192.168.100.1', 'ip_dvr': OrderedDict([('addr', '192.168.100.2/24'), ('mode', 'dvr')]), 'vni': 1}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 244 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":844272}, "response":{"id":844272,"result":[{"rows":[{"_uuid":["uuid","1255c828-9e22-4f65-92ec-c97640bc875f"],"_version":["uuid","7a91f2f2-5651-4f81-8585-dd47ac07cf7c"],"gateway":["set",[]],"bridges":["uuid","00dde895-cdfd-4c41-8bf1-56e6395432fb"],"subnets":["set",[]],"vxlan":["uuid","bb5c6d3e-3a0d-4e96-a7c6-9a54496fb0da"],"services":["set",[]]}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 247 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1]],"op":"select"}],"method":"transact","id":339051}, "response":{"id":339051,"result":[{"rows":[]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:05, 248 module:subnets,
 function:add, router:openwrt2
X-NLAN-Type: logger

Adding a subnet(vlan): 2
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 248 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addbr br1
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 252 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br1 tag=2 -- set interface int_br1 type=internal
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 266 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr1 tag=2 -- set interface int_dvr1 type=internal
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 283 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addif br1 int_br1
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 286 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_br1 promisc on
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 289 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_br1 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 293 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_dvr1 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 294 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev br1 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 299 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns add ns1
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 301 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link add veth-ns1 type veth peer name temp-ns1
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 306 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev temp-ns1 netns ns1
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 311 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip link set dev temp-ns1 name eth0
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 314 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addif br1 veth-ns1
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 316 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 promisc on
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 319 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 325 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip link set dev eth0 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 328 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip addr add dev eth0 192.168.100.102/24
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 331 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip route add default via 192.168.100.2 dev eth0
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 334 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr1 192.168.100.2/24
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 336 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: route
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 337 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip route add default via 192.168.100.1
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 338 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":755175}, "response":{"id":755175,"result":[{"rows":[]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 339 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=1,actions=mod_vlan_vid:2,resubmit(,10)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 344 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=1,dl_type=0x0806,dl_vlan=2,nw_dst=192.168.100.2,actions=drop
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 347 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":144253}, "response":{"id":144253,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 349 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=2,actions=strip_vlan,set_tunnel:1,output:3,output:2
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 353 module:ovsdb,
 function:crud, router:openwrt2
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.101', '192.168.1.103'], 'vid': 2, 'ip_vhost': '192.168.100.102/24', 'default_gw': '192.168.100.1', 'ip_dvr': OrderedDict([('addr', '192.168.100.2/24'), ('mode', 'dvr')]), 'vni': 1}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 354 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_677740","row":{"peers":["set",["192.168.1.101","192.168.1.103"]],"vid":2,"ip_vhost":"192.168.100.102/24","default_gw":"192.168.100.1","ip_dvr":["map",[["addr","192.168.100.2/24"],["mode","dvr"]]],"vni":1},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_677740"]]]]],"op":"mutate"}],"method":"transact","id":366259}, "response":{"id":366259,"result":[{"uuid":["uuid","3bee1c93-eeef-4535-b5c5-8cf4bfd78d8e"]},{"count":1}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 355 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1]],"op":"select"}],"method":"transact","id":345263}, "response":{"id":345263,"result":[{"rows":[{"peers":["set",["192.168.1.101","192.168.1.103"]],"_version":["uuid","6147870b-e233-49a7-91f0-67f36fac50f9"],"ports":["set",[]],"vni":1,"vid":2,"_uuid":["uuid","3bee1c93-eeef-4535-b5c5-8cf4bfd78d8e"],"default_gw":"192.168.100.1","ip_vhost":"192.168.100.102/24","ip_dvr":["map",[["addr","192.168.100.2/24"],["mode","dvr"]]]}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:05, 357 module:nlan_agent,
 function:_route, router:openwrt2
X-NLAN-Type: logger

function:subnets.add, index:['vni', 103], model:{'peers': ['192.168.1.101', '192.168.1.103'], 'vid': 3, 'ip_vhost': '10.0.3.102/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr')])}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 358 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":378017}, "response":{"id":378017,"result":[{"rows":[{"_uuid":["uuid","1255c828-9e22-4f65-92ec-c97640bc875f"],"_version":["uuid","1e7a577f-cdf9-4751-997b-ba349a944cff"],"gateway":["set",[]],"bridges":["uuid","00dde895-cdfd-4c41-8bf1-56e6395432fb"],"subnets":["uuid","3bee1c93-eeef-4535-b5c5-8cf4bfd78d8e"],"vxlan":["uuid","bb5c6d3e-3a0d-4e96-a7c6-9a54496fb0da"],"services":["set",[]]}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 360 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",103]],"op":"select"}],"method":"transact","id":133076}, "response":{"id":133076,"result":[{"rows":[]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:05, 360 module:subnets,
 function:add, router:openwrt2
X-NLAN-Type: logger

Adding a subnet(vlan): 3
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 361 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addbr br103
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 366 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br103 tag=3 -- set interface int_br103 type=internal
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 384 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr103 tag=3 -- set interface int_dvr103 type=internal
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 402 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addif br103 int_br103
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 404 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_br103 promisc on
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 406 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_br103 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 412 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_dvr103 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 415 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev br103 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 419 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns add ns103
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 422 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link add veth-ns103 type veth peer name temp-ns103
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 429 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev temp-ns103 netns ns103
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 435 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip link set dev temp-ns103 name eth0
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 438 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addif br103 veth-ns103
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 441 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 promisc on
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 445 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 455 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip link set dev eth0 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 460 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip addr add dev eth0 10.0.3.102/24
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 463 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip route add default via 10.0.3.1 dev eth0
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 465 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr103 10.0.3.1/24
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 467 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":262302}, "response":{"id":262302,"result":[{"rows":[]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 468 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=103,actions=mod_vlan_vid:3,resubmit(,10)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 472 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=1,dl_type=0x0806,dl_vlan=3,nw_dst=10.0.3.1,actions=drop
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 477 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":525138}, "response":{"id":525138,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 479 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=3,actions=strip_vlan,set_tunnel:103,output:3,output:2
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 484 module:ovsdb,
 function:crud, router:openwrt2
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.101', '192.168.1.103'], 'vid': 3, 'ip_vhost': '10.0.3.102/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr')])}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 485 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_966573","row":{"vni":103,"ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"]]],"peers":["set",["192.168.1.101","192.168.1.103"]],"ip_vhost":"10.0.3.102/24","vid":3},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_966573"]]]]],"op":"mutate"}],"method":"transact","id":743821}, "response":{"id":743821,"result":[{"uuid":["uuid","0792c0a4-35ac-4d7e-a264-f1f443930242"]},{"count":1}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 486 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",103]],"op":"select"}],"method":"transact","id":142081}, "response":{"id":142081,"result":[{"rows":[{"peers":["set",["192.168.1.101","192.168.1.103"]],"_version":["uuid","f2f997d7-831c-452e-bbe0-d008d1ef3ddb"],"ports":["set",[]],"vni":103,"vid":3,"_uuid":["uuid","0792c0a4-35ac-4d7e-a264-f1f443930242"],"default_gw":["set",[]],"ip_vhost":"10.0.3.102/24","ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"]]]}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:05, 488 module:nlan_agent,
 function:_route, router:openwrt2
X-NLAN-Type: logger

function:subnets.add, index:['vni', 101], model:{'peers': ['192.168.1.103', '192.168.1.104'], 'vid': 1, 'ip_vhost': '10.0.1.102/24', 'vni': 101, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'spoke_dvr')])}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 489 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":499500}, "response":{"id":499500,"result":[{"rows":[{"_uuid":["uuid","1255c828-9e22-4f65-92ec-c97640bc875f"],"_version":["uuid","d91fac91-59ef-4f32-ac93-2892fce3d15b"],"gateway":["set",[]],"bridges":["uuid","00dde895-cdfd-4c41-8bf1-56e6395432fb"],"subnets":["set",[["uuid","0792c0a4-35ac-4d7e-a264-f1f443930242"],["uuid","3bee1c93-eeef-4535-b5c5-8cf4bfd78d8e"]]],"vxlan":["uuid","bb5c6d3e-3a0d-4e96-a7c6-9a54496fb0da"],"services":["set",[]]}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 493 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",101]],"op":"select"}],"method":"transact","id":375691}, "response":{"id":375691,"result":[{"rows":[]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:05, 494 module:subnets,
 function:add, router:openwrt2
X-NLAN-Type: logger

Adding a subnet(vlan): 1
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 494 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addbr br101
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 498 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br101 tag=1 -- set interface int_br101 type=internal
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 518 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr101 tag=1 -- set interface int_dvr101 type=internal
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 535 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addif br101 int_br101
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 539 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_br101 promisc on
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 540 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_br101 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 544 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev int_dvr101 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 546 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev br101 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 553 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns add ns101
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 555 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link add veth-ns101 type veth peer name temp-ns101
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 561 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev temp-ns101 netns ns101
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 566 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip link set dev temp-ns101 name eth0
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 569 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: brctl addif br101 veth-ns101
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 573 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 promisc on
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 577 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link set dev veth-ns101 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 584 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip link set dev eth0 up
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 588 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip addr add dev eth0 10.0.1.102/24
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 589 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip netns exec ns101 ip route add default via 10.0.1.1 dev eth0
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 591 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr101 10.0.1.1/24
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 594 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":344744}, "response":{"id":344744,"result":[{"rows":[]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 594 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=101,actions=mod_vlan_vid:1,resubmit(,10)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 598 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ip link show dev int_dvr101
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 602 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","int_dvr101"]],"op":"select"}],"method":"transact","id":519190}, "response":{"id":519190,"result":[{"rows":[{"options":["map",[]],"mtu":1500,"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"0a:72:b6:8c:5d:ae","ingress_policing_rate":0,"ofport":7,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":"up","external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":2,"name":"int_dvr101","type":"internal","cfm_remote_opstate":["set",[]],"_uuid":["uuid","a465a2a6-6792-4a3e-9ec7-48b2a8d8e8cd"],"status":["map",[["driver_name","openvswitch"]]],"ifindex":44,"_version":["uuid","84c4e382-038d-42a4-a4e7-d41287a6b4dc"],"other_config":["map",[]],"admin_state":"up","cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 610 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","int_br101"]],"op":"select"}],"method":"transact","id":629156}, "response":{"id":629156,"result":[{"rows":[{"options":["map",[]],"mtu":1500,"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"b6:94:38:ec:12:34","ingress_policing_rate":0,"ofport":6,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":"up","external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":2,"name":"int_br101","type":"internal","cfm_remote_opstate":["set",[]],"_uuid":["uuid","59e045e1-e1ac-435c-82a5-03fc43df39b8"],"status":["map",[["driver_name","openvswitch"]]],"ifindex":43,"_version":["uuid","4b210655-5140-4f0f-82bf-c1e11be2f35a"],"other_config":["map",[]],"admin_state":"up","cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 614 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=2,in_port=6,dl_type=0x0800,nw_dst=10.0.1.0/24,actions=normal
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 618 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=6,dl_type=0x0800,nw_dst=10.0.0.0/8,actions=resubmit(,1)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 623 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=6,dl_type=0x0800,nw_dst=172.16.0.0/12,actions=resubmit(,1)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 628 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=6,dl_type=0x0800,nw_dst=192.168.0.0/16,actions=resubmit(,1)
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 633 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=0,priority=1,in_port=7,dl_type=0x0806,nw_src=10.0.1.1,nw_proto=2,actions=drop
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 637 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-int table=1,priority=0,in_port=6,actions=set_field:0a:72:b6:8c:5d:ae->dl_dst,output:7
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 642 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":436199}, "response":{"id":436199,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.102"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 645 module:cmdutil,
 function:_cmd2, router:openwrt2
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=1,actions=strip_vlan,set_tunnel:101,output:2,output:4
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:05, 650 module:ovsdb,
 function:crud, router:openwrt2
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.103', '192.168.1.104'], 'vid': 1, 'ip_vhost': '10.0.1.102/24', 'vni': 101, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'spoke_dvr')])}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 652 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_228589","row":{"vni":101,"ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","spoke_dvr"]]],"peers":["set",["192.168.1.103","192.168.1.104"]],"ip_vhost":"10.0.1.102/24","vid":1},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_228589"]]]]],"op":"mutate"}],"method":"transact","id":561513}, "response":{"id":561513,"result":[{"uuid":["uuid","4c7fd3e1-6827-4a01-93f2-4fc097b34bd2"]},{"count":1}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:05, 653 module:ovsdb,
 function:_send, router:openwrt2
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",101]],"op":"select"}],"method":"transact","id":78536}, "response":{"id":78536,"result":[{"rows":[{"peers":["set",["192.168.1.103","192.168.1.104"]],"_version":["uuid","06d4c22a-58a1-4de7-9866-85ed65a04a25"],"ports":["set",[]],"vni":101,"vid":1,"_uuid":["uuid","4c7fd3e1-6827-4a01-93f2-4fc097b34bd2"],"default_gw":["set",[]],"ip_vhost":"10.0.1.102/24","ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","spoke_dvr"]]]}]}],"error":null}}
--UhoLh22PfuqzOHuf4Cgneomzphx1sWwz--


--- RESPONSE from router:openwrt2,platform:openwrt
message: Execution completed
exit: 0
--- STDOUT from router:rpi1,platform:debian
From nobody Wed May 28 05:18:07 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="inkQya5y7Ku1c3MArxaszTQk7U51UgAS"

--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: test/plain
Content-Description: Default STDOUT
X-NLAN-Type: default_stdout


--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:06, 245 module:nlan_agent,
 function:<module>, router:rpi1
X-NLAN-Type: logger

NLAN Agent initialization completed
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 245 module:nlan_agent,
 function:<module>, router:rpi1
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0xa0a2b6c>, 'share_dir': '/opt/nlan/share', 'router': 'rpi1', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'debian', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0xa0b022c>, 'schema': 'ovsdb_nlan.schema'}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:06, 284 module:nlan_agent,
 function:_route, router:rpi1
X-NLAN-Type: logger

function:bridges.add, model:{'ovs_bridges': 'enabled'}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 293 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "where": [], "op": "select"}], "method": "transact", "id": 574297}, "response":{"id":574297,"result":[{"rows":[]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 294 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "row": {}, "op": "insert"}], "method": "transact", "id": 918663}, "response":{"id":918663,"result":[{"uuid":["uuid","17d349ea-1729-424a-9cc5-9511ed6a313d"]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 295 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Bridges", "where": [], "op": "select"}], "method": "transact", "id": 699852}, "response":{"id":699852,"result":[{"rows":[]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:06, 295 module:bridges,
 function:add, router:rpi1
X-NLAN-Type: logger

Adding bridges: br-int and br-tun
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 295 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-int
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 309 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-tun
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 335 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl del-flows br-tun
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 412 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int patch-int -- set interface patch-int type=patch options:peer=patch-tun
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 419 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun patch-tun -- set interface patch-tun type=patch options:peer=patch-int
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 428 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "Interface", "where": [["name", "==", "patch-tun"]], "op": "select"}], "method": "transact", "id": 845172}, "response":{"id":845172,"result":[{"rows":[{"options":["map",[["peer","patch-int"]]],"mtu":["set",[]],"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"72:be:e9:a7:41:7a","ingress_policing_rate":0,"ofport":1,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":["set",[]],"external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":["set",[]],"name":"patch-tun","type":"patch","cfm_remote_opstate":["set",[]],"_uuid":["uuid","607f6d3c-b47b-4330-9247-989ce4560487"],"status":["map",[]],"ifindex":0,"_version":["uuid","5ac24752-2c8a-4aa4-92b6-de2fbcc93e6c"],"other_config":["map",[]],"admin_state":["set",[]],"cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 428 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=1,actions=resubmit(,1)
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 431 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=0,actions=drop
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 434 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=01:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,19)
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 438 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=00:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,20)
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 442 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=0,actions=drop
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 445 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=3,priority=0,actions=drop
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 450 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=10,priority=1,actions=learn(table=20,hard_timeout=300,priority=1,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:0->NXM_OF_VLAN_TCI[],load:NXM_NX_TUN_ID[]->NXM_NX_TUN_ID[],output:NXM_OF_IN_PORT[]),output:1
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 454 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=0,actions=resubmit(,21)
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 458 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=20,priority=0,actions=resubmit(,21)
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 462 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=0,actions=drop
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 466 module:ovsdb,
 function:crud, router:rpi1
X-NLAN-Type: logger

CRUD operation (add): {'ovs_bridges': 'enabled'}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 467 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Bridges", "uuid-name": "temp_336360", "row": {"ovs_bridges": "enabled"}, "op": "insert"}, {"table": "NLAN", "where": [], "mutations": [["bridges", "insert", ["set", [["named-uuid", "temp_336360"]]]]], "op": "mutate"}], "method": "transact", "id": 189855}, "response":{"id":189855,"result":[{"uuid":["uuid","4d03ff38-155c-4bc1-a1ec-dc800b88c2c6"]},{"count":1}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 468 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Bridges", "where": [], "op": "select"}], "method": "transact", "id": 695743}, "response":{"id":695743,"result":[{"rows":[{"_uuid":["uuid","4d03ff38-155c-4bc1-a1ec-dc800b88c2c6"],"_version":["uuid","f7e21109-a429-41bb-ad88-da819922a00f"],"ovs_bridges":"enabled","controller":["set",[]]}]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:06, 470 module:nlan_agent,
 function:_route, router:rpi1
X-NLAN-Type: logger

function:services.add, index:['name', 'snort1'], model:{'name': 'snort1', 'chain': ['mz.101', 'dmz.1001']}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 470 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "where": [], "op": "select"}], "method": "transact", "id": 654281}, "response":{"id":654281,"result":[{"rows":[{"_uuid":["uuid","17d349ea-1729-424a-9cc5-9511ed6a313d"],"_version":["uuid","42e97846-70e3-4248-a39f-54238d4cc7ff"],"gateway":["set",[]],"bridges":["uuid","4d03ff38-155c-4bc1-a1ec-dc800b88c2c6"],"subnets":["set",[]],"vxlan":["set",[]],"services":["set",[]]}]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 471 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Service", "where": [["name", "==", "snort1"]], "op": "select"}], "method": "transact", "id": 340746}, "response":{"id":340746,"result":[{"rows":[]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 471 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: lxc-stop -n snort1
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 499 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: lxc-start -d -f /var/lib/lxc/snort1/config_nlan -n snort1
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 515 module:ovsdb,
 function:crud, router:rpi1
X-NLAN-Type: logger

CRUD operation (add): {'name': 'snort1', 'chain': ['mz.101', 'dmz.1001']}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 516 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Service", "uuid-name": "temp_892159", "row": {"name": "snort1", "chain": ["set", ["mz.101", "dmz.1001"]]}, "op": "insert"}, {"table": "NLAN", "where": [], "mutations": [["services", "insert", ["set", [["named-uuid", "temp_892159"]]]]], "op": "mutate"}], "method": "transact", "id": 260646}, "response":{"id":260646,"result":[{"uuid":["uuid","f3f79a35-3df3-461b-9e9c-3a9fb5f16124"]},{"count":1}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 516 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Service", "where": [["name", "==", "snort1"]], "op": "select"}], "method": "transact", "id": 19223}, "response":{"id":19223,"result":[{"rows":[{"_version":["uuid","9a0fde75-38a7-48c9-a7ca-534d4cd0c40b"],"_uuid":["uuid","f3f79a35-3df3-461b-9e9c-3a9fb5f16124"],"chain":["set",["dmz.1001","mz.101"]],"name":"snort1"}]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:06, 518 module:nlan_agent,
 function:_route, router:rpi1
X-NLAN-Type: logger

function:vxlan.add, model:{'remote_ips': ['192.168.1.103', '192.168.1.102', '192.168.1.101'], 'local_ip': '192.168.1.104'}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 518 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "where": [], "op": "select"}], "method": "transact", "id": 245455}, "response":{"id":245455,"result":[{"rows":[{"_uuid":["uuid","17d349ea-1729-424a-9cc5-9511ed6a313d"],"_version":["uuid","62a85cb1-0cf6-4a5e-b360-c88c3b0d6874"],"gateway":["set",[]],"bridges":["uuid","4d03ff38-155c-4bc1-a1ec-dc800b88c2c6"],"subnets":["set",[]],"vxlan":["set",[]],"services":["uuid","f3f79a35-3df3-461b-9e9c-3a9fb5f16124"]}]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 519 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_VXLAN", "where": [], "op": "select"}], "method": "transact", "id": 354938}, "response":{"id":354938,"result":[{"rows":[]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:06, 519 module:vxlan, function:add,
 router:rpi1
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001103
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 519 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001103 -- set interface 192168001103 type=vxlan options:in_key=flow options:local_ip=192.168.1.104 options:out_key=flow options:remote_ip=192.168.1.103
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:06, 529 module:vxlan, function:add,
 router:rpi1
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001102
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 530 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001102 -- set interface 192168001102 type=vxlan options:in_key=flow options:local_ip=192.168.1.104 options:out_key=flow options:remote_ip=192.168.1.102
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:06, 547 module:vxlan, function:add,
 router:rpi1
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001101
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 547 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001101 -- set interface 192168001101 type=vxlan options:in_key=flow options:local_ip=192.168.1.104 options:out_key=flow options:remote_ip=192.168.1.101
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 586 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "Interface", "where": [["type", "==", "vxlan"]], "columns": ["ofport", "options"], "op": "select"}], "method": "transact", "id": 94801}, "response":{"id":94801,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":4},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2}]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 586 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=4,actions=resubmit(,2)
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 619 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=3,actions=resubmit(,2)
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 628 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=2,actions=resubmit(,2)
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 635 module:ovsdb,
 function:crud, router:rpi1
X-NLAN-Type: logger

CRUD operation (add): {'remote_ips': ['192.168.1.103', '192.168.1.102', '192.168.1.101'], 'local_ip': '192.168.1.104'}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 636 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_VXLAN", "uuid-name": "temp_820948", "row": {"remote_ips": ["set", ["192.168.1.103", "192.168.1.102", "192.168.1.101"]], "local_ip": "192.168.1.104"}, "op": "insert"}, {"table": "NLAN", "where": [], "mutations": [["vxlan", "insert", ["set", [["named-uuid", "temp_820948"]]]]], "op": "mutate"}], "method": "transact", "id": 755756}, "response":{"id":755756,"result":[{"uuid":["uuid","5e16c477-3358-4c93-94b9-939b1fd26409"]},{"count":1}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 637 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_VXLAN", "where": [], "op": "select"}], "method": "transact", "id": 314097}, "response":{"id":314097,"result":[{"rows":[{"_version":["uuid","7e168fc7-2e65-4dca-83cd-8146ea975f8e"],"_uuid":["uuid","5e16c477-3358-4c93-94b9-939b1fd26409"],"local_ip":"192.168.1.104","remote_ips":["set",["192.168.1.101","192.168.1.102","192.168.1.103"]]}]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:06, 641 module:nlan_agent,
 function:_route, router:rpi1
X-NLAN-Type: logger

function:subnets.add, index:['vni', 1001], model:{'peers': ['192.168.1.101'], 'ports': ['dmz.1001'], 'vni': 1001, 'vid': 111}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 641 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "where": [], "op": "select"}], "method": "transact", "id": 309491}, "response":{"id":309491,"result":[{"rows":[{"_uuid":["uuid","17d349ea-1729-424a-9cc5-9511ed6a313d"],"_version":["uuid","b58aa61d-50c6-4312-a060-0d22c398bb81"],"gateway":["set",[]],"bridges":["uuid","4d03ff38-155c-4bc1-a1ec-dc800b88c2c6"],"subnets":["set",[]],"vxlan":["uuid","5e16c477-3358-4c93-94b9-939b1fd26409"],"services":["uuid","f3f79a35-3df3-461b-9e9c-3a9fb5f16124"]}]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 641 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Subnet", "where": [["vni", "==", 1001]], "op": "select"}], "method": "transact", "id": 473634}, "response":{"id":473634,"result":[{"rows":[]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:06, 642 module:subnets,
 function:add, router:rpi1
X-NLAN-Type: logger

Adding a subnet(vlan): 111
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 642 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: brctl addbr br1001
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 645 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br1001 tag=111 -- set interface int_br1001 type=internal
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 666 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr1001 tag=111 -- set interface int_dvr1001 type=internal
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 699 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: brctl addif br1001 int_br1001
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 704 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev int_br1001 promisc on
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 713 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev int_br1001 up
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 716 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev int_dvr1001 up
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 723 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev br1001 up
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 729 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: brctl addif br1001 dmz.1001
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 733 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "Controller", "where": [], "columns": ["target"], "op": "select"}], "method": "transact", "id": 859073}, "response":{"id":859073,"result":[{"rows":[]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 733 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=1001,actions=mod_vlan_vid:111,resubmit(,10)
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 738 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "Interface", "where": [["type", "==", "vxlan"]], "columns": ["ofport", "options"], "op": "select"}], "method": "transact", "id": 338049}, "response":{"id":338049,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":4},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2}]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 738 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=111,actions=strip_vlan,set_tunnel:1001,output:4
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 743 module:ovsdb,
 function:crud, router:rpi1
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.101'], 'ports': ['dmz.1001'], 'vni': 1001, 'vid': 111}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 744 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Subnet", "uuid-name": "temp_889707", "row": {"peers": ["set", ["192.168.1.101"]], "ports": ["set", ["dmz.1001"]], "vni": 1001, "vid": 111}, "op": "insert"}, {"table": "NLAN", "where": [], "mutations": [["subnets", "insert", ["set", [["named-uuid", "temp_889707"]]]]], "op": "mutate"}], "method": "transact", "id": 414977}, "response":{"id":414977,"result":[{"uuid":["uuid","dd84ada8-188f-4fac-90c4-bd9fa0968cf3"]},{"count":1}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 744 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Subnet", "where": [["vni", "==", 1001]], "op": "select"}], "method": "transact", "id": 616945}, "response":{"id":616945,"result":[{"rows":[{"peers":"192.168.1.101","_version":["uuid","c6390320-65da-4146-b364-709622ee4ef1"],"ports":"dmz.1001","vni":1001,"vid":111,"_uuid":["uuid","dd84ada8-188f-4fac-90c4-bd9fa0968cf3"],"default_gw":["set",[]],"ip_vhost":["set",[]],"ip_dvr":["map",[]]}]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:06, 745 module:nlan_agent,
 function:_route, router:rpi1
X-NLAN-Type: logger

function:subnets.add, index:['vni', 101], model:{'peers': ['192.168.1.102', '192.168.1.103'], 'ports': ['mz.101'], 'vni': 101, 'vid': 1}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 745 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN", "where": [], "op": "select"}], "method": "transact", "id": 758681}, "response":{"id":758681,"result":[{"rows":[{"_uuid":["uuid","17d349ea-1729-424a-9cc5-9511ed6a313d"],"_version":["uuid","e8e9bed0-60f0-43cc-892b-63105391c618"],"gateway":["set",[]],"bridges":["uuid","4d03ff38-155c-4bc1-a1ec-dc800b88c2c6"],"subnets":["uuid","dd84ada8-188f-4fac-90c4-bd9fa0968cf3"],"vxlan":["uuid","5e16c477-3358-4c93-94b9-939b1fd26409"],"services":["uuid","f3f79a35-3df3-461b-9e9c-3a9fb5f16124"]}]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 746 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Subnet", "where": [["vni", "==", 101]], "op": "select"}], "method": "transact", "id": 666485}, "response":{"id":666485,"result":[{"rows":[]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 05:18:06, 746 module:subnets,
 function:add, router:rpi1
X-NLAN-Type: logger

Adding a subnet(vlan): 1
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 746 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: brctl addbr br101
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 749 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br101 tag=1 -- set interface int_br101 type=internal
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 770 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr101 tag=1 -- set interface int_dvr101 type=internal
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 802 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: brctl addif br101 int_br101
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 806 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev int_br101 promisc on
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 813 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev int_br101 up
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 815 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev int_dvr101 up
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 819 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ip link set dev br101 up
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 826 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: brctl addif br101 mz.101
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 830 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "Controller", "where": [], "columns": ["target"], "op": "select"}], "method": "transact", "id": 72271}, "response":{"id":72271,"result":[{"rows":[]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 830 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=101,actions=mod_vlan_vid:1,resubmit(,10)
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 840 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "Interface", "where": [["type", "==", "vxlan"]], "columns": ["ofport", "options"], "op": "select"}], "method": "transact", "id": 10700}, "response":{"id":10700,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.101"]]],"ofport":4},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.104"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2}]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 840 module:cmdutil,
 function:_cmd2, router:rpi1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=1,actions=strip_vlan,set_tunnel:101,output:3,output:2
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 05:18:06, 844 module:ovsdb,
 function:crud, router:rpi1
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.102', '192.168.1.103'], 'ports': ['mz.101'], 'vni': 101, 'vid': 1}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 844 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Subnet", "uuid-name": "temp_564571", "row": {"peers": ["set", ["192.168.1.102", "192.168.1.103"]], "ports": ["set", ["mz.101"]], "vni": 101, "vid": 1}, "op": "insert"}, {"table": "NLAN", "where": [], "mutations": [["subnets", "insert", ["set", [["named-uuid", "temp_564571"]]]]], "op": "mutate"}], "method": "transact", "id": 563751}, "response":{"id":563751,"result":[{"uuid":["uuid","83d33db1-03cc-44ad-a0b9-1fe6ec7b4dfe"]},{"count":1}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 05:18:06, 845 module:ovsdb,
 function:_send, router:rpi1
X-NLAN-Type: logger

{"request":{"params": ["Open_vSwitch", {"table": "NLAN_Subnet", "where": [["vni", "==", 101]], "op": "select"}], "method": "transact", "id": 60116}, "response":{"id":60116,"result":[{"rows":[{"peers":["set",["192.168.1.102","192.168.1.103"]],"_version":["uuid","9b95532b-fa69-49af-99c4-c3544951dd03"],"ports":"mz.101","vni":101,"vid":1,"_uuid":["uuid","83d33db1-03cc-44ad-a0b9-1fe6ec7b4dfe"],"default_gw":["set",[]],"ip_vhost":["set",[]],"ip_dvr":["map",[]]}]}],"error":null}}
--inkQya5y7Ku1c3MArxaszTQk7U51UgAS--


--- RESPONSE from router:rpi1,platform:debian
message: Execution completed
exit: 0
--- STDOUT from router:openwrt1,platform:openwrt
From nobody Wed May 28 05:18:20 2014
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd"

--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: test/plain
Content-Description: Default STDOUT
X-NLAN-Type: default_stdout


--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:06, 084 module:nlan_agent,
 function:<module>, router:openwrt1
X-NLAN-Type: logger

NLAN Agent initialization completed
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 084 module:nlan_agent,
 function:<module>, router:openwrt1
X-NLAN-Type: logger

__n__: {'logger2': <logging.Logger object at 0xb74dbe0c>, 'share_dir': '/opt/nlan/share', 'router': 'openwrt1', 'types': {'services': {'name': {'max': 1, '_description': 'Name of the network function', 'key': {'type': 'string'}, 'min': 1}, 'chain': {'max': 'unlimited', '_description': 'Logical network interfaces to which the Network Function is attached', 'key': {'type': 'string'}, 'min': 0}}, 'bridges': {'controller': {'max': 1, '_description': 'IP address of an OpenFlow Controller', 'key': {'_pattern': 'ofc_address', 'type': 'string'}, 'min': 0}, 'ovs_bridges': {'max': 1, '_description': 'Virtual bridges: br-int and br-tun', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'gateway': {'network': {'max': 1, '_description': 'Network interface to which routing info is advertised', 'key': {'type': 'string'}, 'min': 0}, 'rip': {'max': 1, '_description': 'Quagga/Zebra RIP daemon', 'key': {'enum': 'enabled', 'type': 'string'}, 'min': 0}}, 'vxlan': {'remote_ips': {'max': 'unlimited', '_description': 'IP addresses of the remote hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'local_ip': {'max': 1, '_description': 'IP address of the local host', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}}, 'subnets': {'peers': {'max': 'unlimited', '_description': 'Broadcast/Multicast trees for this subnet: IP addresses of the peer hosts', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'vid': {'max': 1, '_description': 'VLAN ID', 'key': {'minInteger': 0, 'maxInteger': 4095, 'type': 'integer'}, 'min': 0}, 'ip_vhost': {'max': 1, '_description': 'Virtual host in a linux network namespace', 'key': {'_pattern': 'ipv4_prefix', 'type': 'string'}, 'min': 0}, 'vni': {'max': 1, '_description': 'Virtual network identifier', 'key': {'minInteger': 0, 'maxInteger': 16777215, 'type': 'integer'}, 'min': 1}, 'ip_dvr': {'max': 3, '_description': 'Distributed Virtual Router setting', 'value': {'_pattern': {'dhcp': 'string', 'addr': 'ipv4_prefix', 'mode': 'dvr_mode'}, 'type': 'string'}, 'key': {'enum': ['set', ['addr', 'mode', 'dhcp']], 'type': 'string'}, 'min': 0}, 'default_gw': {'max': 1, '_description': 'Default GW address for this subnet', 'key': {'_pattern': 'ipv4_address', 'type': 'string'}, 'min': 0}, 'ports': {'max': 'unlimited', '_description': 'Physical/logical ports attached to this subnet', 'key': {'type': 'string'}, 'min': 0}}}, 'tables': {'services': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Service'}, 'min': 0}, 'bridges': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Bridges'}, 'min': 0}, 'gateway': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_Gateway'}, 'min': 0}, 'vxlan': {'max': 1, 'key': {'type': 'uuid', 'refTable': 'NLAN_VXLAN'}, 'min': 0}, 'subnets': {'max': 'unlimited', 'key': {'type': 'uuid', 'refTable': 'NLAN_Subnet'}, 'min': 0}}, 'agent_dir': '/opt/nlan', 'indexes': {'services': 'name', 'subnets': 'vni'}, 'platform': 'openwrt', 'state_order': ['bridges', 'services', 'gateway', 'vxlan', 'subnets'], 'logger': <logging.LoggerAdapter object at 0xb74df4cc>, 'schema': 'ovsdb_nlan.schema'}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:06, 129 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:bridges.add, model:{'ovs_bridges': 'enabled'}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:06, 133 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":509962}, "response":{"id":509962,"result":[{"rows":[]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:06, 134 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","row":{},"op":"insert"}],"method":"transact","id":903314}, "response":{"id":903314,"result":[{"uuid":["uuid","f7c3ecaf-28a8-4ddb-bd3c-d3ce50b8bb66"]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:06, 134 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","where":[],"op":"select"}],"method":"transact","id":519904}, "response":{"id":519904,"result":[{"rows":[]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:06, 135 module:bridges,
 function:add, router:openwrt1
X-NLAN-Type: logger

Adding bridges: br-int and br-tun
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 135 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-int
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 146 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-br br-tun
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 164 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl del-flows br-tun
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 169 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int patch-int -- set interface patch-int type=patch options:peer=patch-tun
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 181 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun patch-tun -- set interface patch-tun type=patch options:peer=patch-int
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:06, 190 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["name","==","patch-tun"]],"op":"select"}],"method":"transact","id":944468}, "response":{"id":944468,"result":[{"rows":[{"options":["map",[["peer","patch-int"]]],"mtu":["set",[]],"link_speed":["set",[]],"statistics":["map",[["collisions",0],["rx_bytes",0],["rx_crc_err",0],["rx_dropped",0],["rx_errors",0],["rx_frame_err",0],["rx_over_err",0],["rx_packets",0],["tx_bytes",0],["tx_dropped",0],["tx_errors",0],["tx_packets",0]]],"mac_in_use":"ca:2e:5f:69:88:19","ingress_policing_rate":0,"ofport":1,"mac":["set",[]],"cfm_fault_status":["set",[]],"duplex":["set",[]],"lacp_current":["set",[]],"cfm_fault":["set",[]],"link_state":["set",[]],"external_ids":["map",[]],"bfd_status":["map",[]],"link_resets":["set",[]],"name":"patch-tun","type":"patch","cfm_remote_opstate":["set",[]],"_uuid":["uuid","8a3b7f74-4e23-4657-850c-2f885237fac2"],"status":["map",[]],"ifindex":0,"_version":["uuid","c1d70434-a2cd-4cfb-a411-95ec098d813b"],"other_config":["map",[]],"admin_state":["set",[]],"cfm_remote_mpids":["set",[]],"cfm_mpid":["set",[]],"bfd":["map",[]],"ofport_request":["set",[]],"ingress_policing_burst":0,"cfm_flap_count":["set",[]],"cfm_health":["set",[]]}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 196 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=1,actions=resubmit(,1)
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 200 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=0,actions=drop
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 203 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=01:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,19)
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 208 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=1,priority=0,dl_dst=00:00:00:00:00:00/01:00:00:00:00:00,actions=resubmit(,20)
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 212 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=0,actions=drop
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 216 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=3,priority=0,actions=drop
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 219 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=10,priority=1,actions=learn(table=20,hard_timeout=300,priority=1,NXM_OF_VLAN_TCI[0..11],NXM_OF_ETH_DST[]=NXM_OF_ETH_SRC[],load:0->NXM_OF_VLAN_TCI[],load:NXM_NX_TUN_ID[]->NXM_NX_TUN_ID[],output:NXM_OF_IN_PORT[]),output:1
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 223 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=0,actions=resubmit(,21)
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 227 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=20,priority=0,actions=resubmit(,21)
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 232 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=0,actions=drop
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 235 module:ovsdb,
 function:crud, router:openwrt1
X-NLAN-Type: logger

CRUD operation (add): {'ovs_bridges': 'enabled'}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:06, 237 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","uuid-name":"temp_298473","row":{"ovs_bridges":"enabled"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["bridges","insert",["set",[["named-uuid","temp_298473"]]]]],"op":"mutate"}],"method":"transact","id":515978}, "response":{"id":515978,"result":[{"uuid":["uuid","ace5c7f3-6aa4-4b4e-9961-eaf7e21c0917"]},{"count":1}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:06, 238 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Bridges","where":[],"op":"select"}],"method":"transact","id":791001}, "response":{"id":791001,"result":[{"rows":[{"_uuid":["uuid","ace5c7f3-6aa4-4b4e-9961-eaf7e21c0917"],"_version":["uuid","db9e7459-aaff-4a8b-9abe-806cd006e4ef"],"ovs_bridges":"enabled","controller":["set",[]]}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:06, 240 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:gateway.add, model:{'network': 'eth2', 'rip': 'enabled'}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:06, 240 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":857136}, "response":{"id":857136,"result":[{"rows":[{"_uuid":["uuid","f7c3ecaf-28a8-4ddb-bd3c-d3ce50b8bb66"],"_version":["uuid","8addcea2-d0fc-4fe2-9411-3f88826ca5a3"],"gateway":["set",[]],"bridges":["uuid","ace5c7f3-6aa4-4b4e-9961-eaf7e21c0917"],"subnets":["set",[]],"vxlan":["set",[]],"services":["set",[]]}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:06, 243 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Gateway","where":[],"op":"select"}],"method":"transact","id":405523}, "response":{"id":405523,"result":[{"rows":[]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:06, 243 module:gateway,
 function:add, router:openwrt1
X-NLAN-Type: logger

Adding a gateway router: rip
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 243 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: vtysh -c configure terminal -c interface eth2 -c link-detect -c exit -c router rip -c version 2 -c redistribute connected -c network eth2 -c exit -c exit -c write -c exit
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 281 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/quagga start
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 312 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: vtysh -c configure terminal -c interface eth2 -c link-detect -c exit -c router rip -c version 2 -c redistribute connected -c network eth2 -c exit -c exit -c write -c exit
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:06, 345 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/quagga restart
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 394 module:ovsdb,
 function:crud, router:openwrt1
X-NLAN-Type: logger

CRUD operation (add): {'network': 'eth2', 'rip': 'enabled'}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 395 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Gateway","uuid-name":"temp_389261","row":{"network":"eth2","rip":"enabled"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["gateway","insert",["set",[["named-uuid","temp_389261"]]]]],"op":"mutate"}],"method":"transact","id":839299}, "response":{"id":839299,"result":[{"uuid":["uuid","9fbe9ca9-7789-4819-8972-a43663f8f3fd"]},{"count":1}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 396 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Gateway","where":[],"op":"select"}],"method":"transact","id":919060}, "response":{"id":919060,"result":[{"rows":[{"_version":["uuid","4371af09-3c8d-4e9f-be21-9804d4da142b"],"network":"eth2","_uuid":["uuid","9fbe9ca9-7789-4819-8972-a43663f8f3fd"],"rip":"enabled"}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:08, 398 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:vxlan.add, model:{'remote_ips': ['192.168.1.103', '192.168.1.102', '192.168.1.104'], 'local_ip': '192.168.1.101'}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 399 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":539109}, "response":{"id":539109,"result":[{"rows":[{"_uuid":["uuid","f7c3ecaf-28a8-4ddb-bd3c-d3ce50b8bb66"],"_version":["uuid","6ff9c252-2e23-4f13-8ce5-493c5c743fc9"],"gateway":["uuid","9fbe9ca9-7789-4819-8972-a43663f8f3fd"],"bridges":["uuid","ace5c7f3-6aa4-4b4e-9961-eaf7e21c0917"],"subnets":["set",[]],"vxlan":["set",[]],"services":["set",[]]}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 400 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","where":[],"op":"select"}],"method":"transact","id":591946}, "response":{"id":591946,"result":[{"rows":[]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:08, 400 module:vxlan, function:add,
 router:openwrt1
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001103
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 400 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001103 -- set interface 192168001103 type=vxlan options:in_key=flow options:local_ip=192.168.1.101 options:out_key=flow options:remote_ip=192.168.1.103
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:08, 407 module:vxlan, function:add,
 router:openwrt1
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001102
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 407 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001102 -- set interface 192168001102 type=vxlan options:in_key=flow options:local_ip=192.168.1.101 options:out_key=flow options:remote_ip=192.168.1.102
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:08, 414 module:vxlan, function:add,
 router:openwrt1
X-NLAN-Type: logger

Adding a VXLAN tunnel: 192168001104
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 414 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-tun 192168001104 -- set interface 192168001104 type=vxlan options:in_key=flow options:local_ip=192.168.1.101 options:out_key=flow options:remote_ip=192.168.1.104
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 420 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":411793}, "response":{"id":411793,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 421 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=3,actions=resubmit(,2)
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 424 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=2,actions=resubmit(,2)
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 427 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=0,priority=1,in_port=4,actions=resubmit(,2)
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 429 module:ovsdb,
 function:crud, router:openwrt1
X-NLAN-Type: logger

CRUD operation (add): {'remote_ips': ['192.168.1.103', '192.168.1.102', '192.168.1.104'], 'local_ip': '192.168.1.101'}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 430 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","uuid-name":"temp_329071","row":{"remote_ips":["set",["192.168.1.103","192.168.1.102","192.168.1.104"]],"local_ip":"192.168.1.101"},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["vxlan","insert",["set",[["named-uuid","temp_329071"]]]]],"op":"mutate"}],"method":"transact","id":441417}, "response":{"id":441417,"result":[{"uuid":["uuid","f38cd548-7698-4b70-ae5e-f8d1c187fd74"]},{"count":1}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 430 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_VXLAN","where":[],"op":"select"}],"method":"transact","id":802269}, "response":{"id":802269,"result":[{"rows":[{"_version":["uuid","8dd4f717-6f35-438d-9761-0d35d211fdd5"],"_uuid":["uuid","f38cd548-7698-4b70-ae5e-f8d1c187fd74"],"local_ip":"192.168.1.101","remote_ips":["set",["192.168.1.102","192.168.1.103","192.168.1.104"]]}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:08, 435 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:subnets.add, index:['vni', 1], model:{'peers': ['192.168.1.102', '192.168.1.103'], 'vid': 2, 'ip_vhost': '192.168.100.101/24', 'vni': 1, 'ip_dvr': OrderedDict([('addr', '192.168.100.1/24'), ('mode', 'dvr')])}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 435 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":404534}, "response":{"id":404534,"result":[{"rows":[{"_uuid":["uuid","f7c3ecaf-28a8-4ddb-bd3c-d3ce50b8bb66"],"_version":["uuid","8ff77e5e-c0e0-46b1-a209-83bcdd3ca96e"],"gateway":["uuid","9fbe9ca9-7789-4819-8972-a43663f8f3fd"],"bridges":["uuid","ace5c7f3-6aa4-4b4e-9961-eaf7e21c0917"],"subnets":["set",[]],"vxlan":["uuid","f38cd548-7698-4b70-ae5e-f8d1c187fd74"],"services":["set",[]]}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 436 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1]],"op":"select"}],"method":"transact","id":897223}, "response":{"id":897223,"result":[{"rows":[]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:08, 437 module:subnets,
 function:add, router:openwrt1
X-NLAN-Type: logger

Adding a subnet(vlan): 2
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 437 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addbr br1
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 441 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br1 tag=2 -- set interface int_br1 type=internal
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 452 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr1 tag=2 -- set interface int_dvr1 type=internal
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 463 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addif br1 int_br1
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 465 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_br1 promisc on
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 467 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_br1 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 470 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_dvr1 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 472 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev br1 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 475 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns add ns1
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 477 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link add veth-ns1 type veth peer name temp-ns1
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 482 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev temp-ns1 netns ns1
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 487 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip link set dev temp-ns1 name eth0
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 492 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addif br1 veth-ns1
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 496 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 promisc on
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 499 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 504 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip link set dev eth0 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 509 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip addr add dev eth0 192.168.100.101/24
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 512 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1 ip route add default via 192.168.100.1 dev eth0
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 514 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr1 192.168.100.1/24
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 516 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":897587}, "response":{"id":897587,"result":[{"rows":[]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 516 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=1,actions=mod_vlan_vid:2,resubmit(,10)
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 518 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=1,dl_type=0x0806,dl_vlan=2,nw_dst=192.168.100.1,actions=drop
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 521 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":995431}, "response":{"id":995431,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 523 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=2,actions=strip_vlan,set_tunnel:1,output:3,output:2
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 527 module:ovsdb,
 function:crud, router:openwrt1
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.102', '192.168.1.103'], 'vid': 2, 'ip_vhost': '192.168.100.101/24', 'vni': 1, 'ip_dvr': OrderedDict([('addr', '192.168.100.1/24'), ('mode', 'dvr')])}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 527 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_499592","row":{"vni":1,"ip_dvr":["map",[["addr","192.168.100.1/24"],["mode","dvr"]]],"peers":["set",["192.168.1.102","192.168.1.103"]],"ip_vhost":"192.168.100.101/24","vid":2},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_499592"]]]]],"op":"mutate"}],"method":"transact","id":446828}, "response":{"id":446828,"result":[{"uuid":["uuid","7705c2ba-9a8b-4a62-97fb-d554b6ef5a2f"]},{"count":1}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 528 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1]],"op":"select"}],"method":"transact","id":922473}, "response":{"id":922473,"result":[{"rows":[{"peers":["set",["192.168.1.102","192.168.1.103"]],"_version":["uuid","f305b2a4-6d10-479e-80c6-c2ee5e8f0720"],"ports":["set",[]],"vni":1,"vid":2,"_uuid":["uuid","7705c2ba-9a8b-4a62-97fb-d554b6ef5a2f"],"default_gw":["set",[]],"ip_vhost":"192.168.100.101/24","ip_dvr":["map",[["addr","192.168.100.1/24"],["mode","dvr"]]]}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:08, 529 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:subnets.add, index:['vni', 103], model:{'peers': ['192.168.1.102', '192.168.1.103'], 'vid': 3, 'ip_vhost': '10.0.3.101/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr'), ('dhcp', 'enabled')])}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 530 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":889144}, "response":{"id":889144,"result":[{"rows":[{"_uuid":["uuid","f7c3ecaf-28a8-4ddb-bd3c-d3ce50b8bb66"],"_version":["uuid","1673f39f-ec16-4152-8fae-cf8c827dacdd"],"gateway":["uuid","9fbe9ca9-7789-4819-8972-a43663f8f3fd"],"bridges":["uuid","ace5c7f3-6aa4-4b4e-9961-eaf7e21c0917"],"subnets":["uuid","7705c2ba-9a8b-4a62-97fb-d554b6ef5a2f"],"vxlan":["uuid","f38cd548-7698-4b70-ae5e-f8d1c187fd74"],"services":["set",[]]}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:08, 531 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",103]],"op":"select"}],"method":"transact","id":978687}, "response":{"id":978687,"result":[{"rows":[]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:08, 532 module:subnets,
 function:add, router:openwrt1
X-NLAN-Type: logger

Adding a subnet(vlan): 3
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 532 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addbr br103
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 535 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br103 tag=3 -- set interface int_br103 type=internal
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 549 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr103 tag=3 -- set interface int_dvr103 type=internal
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 563 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addif br103 int_br103
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 564 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_br103 promisc on
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 566 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_br103 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 567 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_dvr103 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 569 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev br103 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 575 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns add ns103
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 578 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link add veth-ns103 type veth peer name temp-ns103
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 582 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev temp-ns103 netns ns103
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 585 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip link set dev temp-ns103 name eth0
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 587 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addif br103 veth-ns103
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 590 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 promisc on
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 593 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns103 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 600 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip link set dev eth0 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 604 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip addr add dev eth0 10.0.3.101/24
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 606 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns103 ip route add default via 10.0.3.1 dev eth0
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 608 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr103 10.0.3.1/24
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 610 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr103=interface
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 611 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr103.ifname=int_dvr103
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 612 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr103.proto=static
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 613 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr103.ipaddr=10.0.3.1
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 615 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr103.netmask=255.255.255.0
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 616 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr103=dhcp
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 617 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr103.interface=int_dvr103
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 618 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr103.start=100
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 619 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr103.limit=150
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 621 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr103.leasetime=12h
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 622 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci commit
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:08, 630 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/network restart
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:09, 659 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/dnsmasq restart
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:12, 747 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":771508}, "response":{"id":771508,"result":[{"rows":[]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 748 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=103,actions=mod_vlan_vid:3,resubmit(,10)
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 754 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=19,priority=1,dl_type=0x0806,dl_vlan=3,nw_dst=10.0.3.1,actions=drop
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:12, 758 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":7773}, "response":{"id":7773,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 760 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=3,actions=strip_vlan,set_tunnel:103,output:3,output:2
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 763 module:ovsdb,
 function:crud, router:openwrt1
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.102', '192.168.1.103'], 'vid': 3, 'ip_vhost': '10.0.3.101/24', 'vni': 103, 'ip_dvr': OrderedDict([('addr', '10.0.3.1/24'), ('mode', 'dvr'), ('dhcp', 'enabled')])}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:12, 764 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_566264","row":{"vni":103,"ip_dvr":["map",[["addr","10.0.3.1/24"],["mode","dvr"],["dhcp","enabled"]]],"peers":["set",["192.168.1.102","192.168.1.103"]],"ip_vhost":"10.0.3.101/24","vid":3},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_566264"]]]]],"op":"mutate"}],"method":"transact","id":498254}, "response":{"id":498254,"result":[{"uuid":["uuid","747e8531-c941-481e-af64-f236e9b07ca0"]},{"count":1}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:12, 765 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",103]],"op":"select"}],"method":"transact","id":252298}, "response":{"id":252298,"result":[{"rows":[{"peers":["set",["192.168.1.102","192.168.1.103"]],"_version":["uuid","36b602a3-7d23-4333-a5ab-2afd9c5f65cf"],"ports":["set",[]],"vni":103,"vid":3,"_uuid":["uuid","747e8531-c941-481e-af64-f236e9b07ca0"],"default_gw":["set",[]],"ip_vhost":"10.0.3.101/24","ip_dvr":["map",[["addr","10.0.3.1/24"],["dhcp","enabled"],["mode","dvr"]]]}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:12, 766 module:nlan_agent,
 function:_route, router:openwrt1
X-NLAN-Type: logger

function:subnets.add, index:['vni', 1001], model:{'peers': ['192.168.1.104'], 'vid': 1, 'ip_vhost': '10.0.1.101/24', 'vni': 1001, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'hub'), ('dhcp', 'enabled')])}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:12, 766 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN","where":[],"op":"select"}],"method":"transact","id":944641}, "response":{"id":944641,"result":[{"rows":[{"_uuid":["uuid","f7c3ecaf-28a8-4ddb-bd3c-d3ce50b8bb66"],"_version":["uuid","50719cbe-2ebc-4fcf-b31e-14d43a721573"],"gateway":["uuid","9fbe9ca9-7789-4819-8972-a43663f8f3fd"],"bridges":["uuid","ace5c7f3-6aa4-4b4e-9961-eaf7e21c0917"],"subnets":["set",[["uuid","747e8531-c941-481e-af64-f236e9b07ca0"],["uuid","7705c2ba-9a8b-4a62-97fb-d554b6ef5a2f"]]],"vxlan":["uuid","f38cd548-7698-4b70-ae5e-f8d1c187fd74"],"services":["set",[]]}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:12, 768 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1001]],"op":"select"}],"method":"transact","id":128226}, "response":{"id":128226,"result":[{"rows":[]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [INFO] 2014-05-28 12:18:12, 768 module:subnets,
 function:add, router:openwrt1
X-NLAN-Type: logger

Adding a subnet(vlan): 1
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 768 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addbr br1001
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 772 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_br1001 tag=1 -- set interface int_br1001 type=internal
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 783 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-vsctl add-port br-int int_dvr1001 tag=1 -- set interface int_dvr1001 type=internal
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 798 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addif br1001 int_br1001
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 800 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_br1001 promisc on
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 803 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_br1001 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 806 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev int_dvr1001 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 809 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev br1001 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 814 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns add ns1001
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 829 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link add veth-ns1001 type veth peer name temp-ns1001
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 836 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev temp-ns1001 netns ns1001
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 842 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1001 ip link set dev temp-ns1001 name eth0
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 845 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: brctl addif br1001 veth-ns1001
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 849 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1001 promisc on
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 851 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip link set dev veth-ns1001 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 860 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1001 ip link set dev eth0 up
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 864 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1001 ip addr add dev eth0 10.0.1.101/24
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 867 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip netns exec ns1001 ip route add default via 10.0.1.1 dev eth0
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 870 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ip addr add dev int_dvr1001 10.0.1.1/24
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 873 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr1001=interface
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 875 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr1001.ifname=int_dvr1001
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 877 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr1001.proto=static
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 879 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr1001.ipaddr=10.0.1.1
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 883 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set network.int_dvr1001.netmask=255.255.255.0
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 884 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr1001=dhcp
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 886 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr1001.interface=int_dvr1001
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 890 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr1001.start=100
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 894 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr1001.limit=150
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 895 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci set dhcp.int_dvr1001.leasetime=12h
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 898 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: uci commit
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:12, 928 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/network restart
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:13, 971 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: /etc/init.d/dnsmasq restart
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:20, 078 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Controller","where":[],"columns":["target"],"op":"select"}],"method":"transact","id":630844}, "response":{"id":630844,"result":[{"rows":[]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:20, 078 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=2,priority=1,tun_id=1001,actions=mod_vlan_vid:1,resubmit(,10)
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:20, 085 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"Interface","where":[["type","==","vxlan"]],"columns":["ofport","options"],"op":"select"}],"method":"transact","id":250828}, "response":{"id":250828,"result":[{"rows":[{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.102"]]],"ofport":3},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.103"]]],"ofport":2},{"options":["map",[["in_key","flow"],["local_ip","192.168.1.101"],["out_key","flow"],["remote_ip","192.168.1.104"]]],"ofport":4}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:20, 087 module:cmdutil,
 function:_cmd2, router:openwrt1
X-NLAN-Type: logger

cmd: ovs-ofctl add-flow br-tun table=21,priority=1,dl_vlan=1,actions=strip_vlan,set_tunnel:1001,output:4
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: text/plain
Content-Description: [DEBUG] 2014-05-28 12:18:20, 090 module:ovsdb,
 function:crud, router:openwrt1
X-NLAN-Type: logger

CRUD operation (add): {'peers': ['192.168.1.104'], 'vid': 1, 'ip_vhost': '10.0.1.101/24', 'vni': 1001, 'ip_dvr': OrderedDict([('addr', '10.0.1.1/24'), ('mode', 'hub'), ('dhcp', 'enabled')])}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:20, 091 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","uuid-name":"temp_916289","row":{"vni":1001,"ip_dvr":["map",[["addr","10.0.1.1/24"],["mode","hub"],["dhcp","enabled"]]],"peers":["set",["192.168.1.104"]],"ip_vhost":"10.0.1.101/24","vid":1},"op":"insert"},{"table":"NLAN","where":[],"mutations":[["subnets","insert",["set",[["named-uuid","temp_916289"]]]]],"op":"mutate"}],"method":"transact","id":902087}, "response":{"id":902087,"result":[{"uuid":["uuid","7eae85d1-fda4-4c20-87fc-c753f1630c52"]},{"count":1}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd
Content-Type: application/json
Content-Description: [DEBUG] 2014-05-28 12:18:20, 092 module:ovsdb,
 function:_send, router:openwrt1
X-NLAN-Type: logger

{"request":{"params":["Open_vSwitch",{"table":"NLAN_Subnet","where":[["vni","==",1001]],"op":"select"}],"method":"transact","id":201962}, "response":{"id":201962,"result":[{"rows":[{"peers":"192.168.1.104","_version":["uuid","7e451cbf-cb1a-407c-bb78-bef6477060ac"],"ports":["set",[]],"vni":1001,"vid":1,"_uuid":["uuid","7eae85d1-fda4-4c20-87fc-c753f1630c52"],"default_gw":["set",[]],"ip_vhost":"10.0.1.101/24","ip_dvr":["map",[["addr","10.0.1.1/24"],["dhcp","enabled"],["mode","hub"]]]}]}],"error":null}}
--HnPHNPm4mTKmUXMze6lwYjmH7zoZpupd--


--- STDERR from router:openwrt1,platform:openwrt
Command failed: Not found
Command failed: Not found
--- RESPONSE from router:openwrt1,platform:openwrt
message: Execution completed
exit: 0
=+=+= Transaction Summary =+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+

Start Time: 2014-05-28 05:18:06.394137

Router           Result    Elapsed Time
---------------------------------------
openwrt3          :-)         1.03(sec)
openwrt2          :-)         1.08(sec)
rpi1              :-)         1.11(sec)
openwrt1          :-)        14.36(sec)
--- STDOUT from router:openwrt1,platform:openwrt
Hello World!
--- STDOUT from router:rpi1,platform:debian
Hello World!
--- STDOUT from router:openwrt2,platform:openwrt
Hello World!
--- STDOUT from router:openwrt3,platform:openwrt
Hello World!
--- STDOUT from router:openwrt1,platform:openwrt
PING 10.0.1.102 (10.0.1.102): 56 data bytes
64 bytes from 10.0.1.102: seq=0 ttl=64 time=3.105 ms

--- 10.0.1.102 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 3.105/3.105/3.105 ms


--- STDOUT from router:openwrt1,platform:openwrt
PING 10.0.1.102 (10.0.1.102): 56 data bytes
64 bytes from 10.0.1.102: seq=0 ttl=64 time=0.810 ms

--- 10.0.1.102 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.810/0.810/0.810 ms


--- STDOUT from router:openwrt1,platform:openwrt
PING 10.0.3.103 (10.0.3.103): 56 data bytes
64 bytes from 10.0.3.103: seq=0 ttl=64 time=3.213 ms

--- 10.0.3.103 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 3.213/3.213/3.213 ms


--- STDOUT from router:openwrt3,platform:openwrt
PING 10.0.1.101 (10.0.1.101): 56 data bytes
64 bytes from 10.0.1.101: seq=0 ttl=63 time=4.677 ms

--- 10.0.1.101 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 4.677/4.677/4.677 ms


--- STDOUT from router:openwrt2,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=3.109 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 3.109/3.109/3.109 ms


--- STDOUT from router:openwrt3,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=3.366 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 3.366/3.366/3.366 ms


--- STDOUT from router:openwrt2,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=2.374 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 2.374/2.374/2.374 ms


--- STDOUT from router:openwrt2,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=0.847 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.847/0.847/0.847 ms


--- STDOUT from router:openwrt3,platform:openwrt
PING 10.0.1.102 (10.0.1.102): 56 data bytes
64 bytes from 10.0.1.102: seq=0 ttl=63 time=2.524 ms

--- 10.0.1.102 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 2.524/2.524/2.524 ms


--- STDOUT from router:openwrt3,platform:openwrt
PING 10.0.1.1 (10.0.1.1): 56 data bytes
64 bytes from 10.0.1.1: seq=0 ttl=64 time=0.348 ms

--- 10.0.1.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.348/0.348/0.348 ms


--- STDOUT from router:openwrt2,platform:openwrt
PING 10.0.1.1 (10.0.1.1): 56 data bytes
64 bytes from 10.0.1.1: seq=0 ttl=64 time=0.506 ms

--- 10.0.1.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.506/0.506/0.506 ms


--- STDOUT from router:openwrt2,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=2.021 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 2.021/2.021/2.021 ms


--- STDOUT from router:openwrt2,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=1.099 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 1.099/1.099/1.099 ms


--- STDOUT from router:openwrt3,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=2.255 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 2.255/2.255/2.255 ms


--- STDOUT from router:openwrt3,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=2.138 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 2.138/2.138/2.138 ms


--- STDOUT from router:openwrt2,platform:openwrt
--- STDOUT from router:openwrt1,platform:openwrt
--- STDOUT from router:openwrt3,platform:openwrt
--- STDOUT from router:rpi1,platform:debian
--- STDOUT from router:openwrt1,platform:openwrt
Hello World!
--- STDOUT from router:openwrt2,platform:openwrt
Hello World!
--- STDOUT from router:openwrt3,platform:openwrt
Hello World!
--- STDOUT from router:rpi1,platform:debian
Hello World!
--- STDOUT from router:openwrt1,platform:openwrt
PING 10.0.1.102 (10.0.1.102): 56 data bytes

--- 10.0.1.102 ping statistics ---
1 packets transmitted, 0 packets received, 100% packet loss


--- STDOUT from router:openwrt1,platform:openwrt
PING 10.0.1.102 (10.0.1.102): 56 data bytes

--- 10.0.1.102 ping statistics ---
1 packets transmitted, 0 packets received, 100% packet loss


--- STDOUT from router:openwrt1,platform:openwrt
PING 10.0.3.103 (10.0.3.103): 56 data bytes
64 bytes from 10.0.3.103: seq=0 ttl=64 time=1.746 ms

--- 10.0.3.103 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 1.746/1.746/1.746 ms


--- STDOUT from router:openwrt3,platform:openwrt
PING 10.0.1.101 (10.0.1.101): 56 data bytes

--- 10.0.1.101 ping statistics ---
1 packets transmitted, 0 packets received, 100% packet loss


--- STDOUT from router:openwrt2,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 0 packets received, 100% packet loss


--- STDOUT from router:openwrt3,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 0 packets received, 100% packet loss


--- STDOUT from router:openwrt2,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=1.601 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 1.601/1.601/1.601 ms


--- STDOUT from router:openwrt2,platform:openwrt
PING 192.168.100.1 (192.168.100.1): 56 data bytes
64 bytes from 192.168.100.1: seq=0 ttl=64 time=0.814 ms

--- 192.168.100.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.814/0.814/0.814 ms


--- STDOUT from router:openwrt3,platform:openwrt
PING 10.0.1.102 (10.0.1.102): 56 data bytes

--- 10.0.1.102 ping statistics ---
1 packets transmitted, 0 packets received, 100% packet loss


--- STDOUT from router:openwrt3,platform:openwrt
PING 10.0.1.1 (10.0.1.1): 56 data bytes
64 bytes from 10.0.1.1: seq=0 ttl=64 time=0.451 ms

--- 10.0.1.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.451/0.451/0.451 ms


--- STDOUT from router:openwrt2,platform:openwrt
PING 10.0.1.1 (10.0.1.1): 56 data bytes
64 bytes from 10.0.1.1: seq=0 ttl=64 time=0.401 ms

--- 10.0.1.1 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 0.401/0.401/0.401 ms


--- STDOUT from router:openwrt2,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 0 packets received, 100% packet loss


--- STDOUT from router:openwrt2,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=1.133 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 1.133/1.133/1.133 ms


--- STDOUT from router:openwrt3,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 0 packets received, 100% packet loss


--- STDOUT from router:openwrt3,platform:openwrt
PING 8.8.8.8 (8.8.8.8): 56 data bytes
64 bytes from 8.8.8.8: seq=0 ttl=63 time=1.843 ms

--- 8.8.8.8 ping statistics ---
1 packets transmitted, 1 packets received, 0% packet loss
round-trip min/avg/max = 1.843/1.843/1.843 ms


